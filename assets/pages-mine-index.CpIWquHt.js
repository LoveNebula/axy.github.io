import{c as a,d as e,e as s,F as l,k as n,w as t,H as o,i as r,j as u,f as i,m as d,l as f,t as c,s as p,A as _,a7 as m,K as v,p as w}from"./index-CPBjD6nT.js";import{_ as h,a as g}from"./uv-row.Br5R1eP3.js";import{_ as y}from"./uv-icon.BeAryk0A.js";import{c as j}from"./util.Bs1Kd6vn.js";import{c as z}from"./bizScheduApi.BbFgL-ID.js";import{_ as k}from"./_plugin-vue_export-helper.BCo6x5W8.js";const x=k({__name:"index",setup(k){const x=a((()=>p.getters.userInfo)),C=()=>{_({url:"/pages/mine/pwd/index"})},K=()=>{uni.$snowy.modal.confirm("确定注销并退出系统吗？").then((()=>{p.dispatch("LogOut").then((()=>{uni.$snowy.tab.reLaunch(m.NO_TOKEN_BACK_URL)}))}))},O=()=>{z().then((a=>{console.log(a),a.data?plus.runtime.getProperty(plus.runtime.appid,(e=>{if(1==j(a.data.version,e.version)){let e=JSON.stringify(a.data);_({url:`/pages/upgrade/upgrade?data=${e}`,fail:a=>{console.error("更新弹框跳转失败",a)}})}else v({title:"当前已是最新版",icon:"none"})})):v({title:"当前已是最新版",icon:"none"})}))};return(a,p)=>{const _=w,m=e(s("uv-col"),h),v=r,j=e(s("uv-row"),g),z=e(s("uv-icon"),y);return u(),l(o,null,[n(v,{class:"header snowy-shadow"},{default:t((()=>[n(j,null,{default:t((()=>[n(m,{span:"2.5"},{default:t((()=>{var a,e;return[(null==(a=x.value)?void 0:a.avatar)?(u(),i(_,{key:0,class:"avatar",src:null==(e=x.value)?void 0:e.avatar,mode:"aspectFit"},null,8,["src"])):d("",!0)]})),_:1}),n(m,{span:"4"},{default:t((()=>[n(v,{class:"header-left"},{default:t((()=>{var a;return[f(c(null==(a=x.value)?void 0:a.name),1)]})),_:1})])),_:1})])),_:1})])),_:1}),n(v,{class:"menu snowy-shadow"},{default:t((()=>[n(j,{onClick:C},{default:t((()=>[n(m,{span:"1"},{default:t((()=>[n(z,{name:"lock-fill",color:"#fa3534",size:"20"})])),_:1}),n(m,{span:"10.5"},{default:t((()=>[n(v,{class:"menu-left"},{default:t((()=>[f("修改密码")])),_:1})])),_:1}),n(m,{span:"0.5"},{default:t((()=>[n(z,{name:"arrow-right",color:"#2979ff",size:"15"})])),_:1})])),_:1})])),_:1}),n(v,{class:"menu snowy-shadow"},{default:t((()=>[n(j,{onClick:O},{default:t((()=>[n(m,{span:"1"},{default:t((()=>[n(z,{name:"error-circle-fill",color:"#19D46B",size:"20"})])),_:1}),n(m,{span:"10.5"},{default:t((()=>[n(v,{class:"menu-left"},{default:t((()=>[f("检查更新")])),_:1})])),_:1}),n(m,{span:"0.5"},{default:t((()=>[n(z,{name:"arrow-right",color:"#2979ff",size:"15"})])),_:1})])),_:1})])),_:1}),n(v,{class:"menu snowy-shadow"},{default:t((()=>[n(j,{onClick:K},{default:t((()=>[n(m,{span:"1"},{default:t((()=>[n(z,{name:"warning-fill",color:"#ff9900",size:"20"})])),_:1}),n(m,{span:"10.5"},{default:t((()=>[n(v,{class:"menu-left"},{default:t((()=>[f("退出登录")])),_:1})])),_:1}),n(m,{span:"0.5"},{default:t((()=>[n(z,{name:"arrow-right",color:"#2979ff",size:"15"})])),_:1})])),_:1})])),_:1})],64)}}},[["__scopeId","data-v-5187d3df"]]);export{x as default};
