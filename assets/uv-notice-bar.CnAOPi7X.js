var e,t,o,i,l,n;import{_ as a}from"./uv-icon.BeAryk0A.js";import{ac as c,ad as s,d as r,e as u,j as d,f as p,w as m,v as h,k as y,m as f,x as v,F as _,H as g,G as S,l as k,t as b,i as x,q as C,aS as w,aT as $}from"./index-CPBjD6nT.js";import{_ as z}from"./_plugin-vue_export-helper.BCo6x5W8.js";const T=z({emits:["click","close","change"],mixins:[c,s,{props:{text:{type:[Array],default:""},icon:{type:[String,Boolean,null],default:"volume"},mode:{type:String,default:""},color:{type:String,default:"#f9ae3d"},bgColor:{type:String,default:"#fdf6ec"},fontSize:{type:[String,Number],default:14},speed:{type:[String,Number],default:80},step:{type:Boolean,default:!1},duration:{type:[String,Number],default:1500},disableTouch:{type:Boolean,default:!0},disableScroll:{type:Boolean,default:!1},...null==(t=null==(e=uni.$uv)?void 0:e.props)?void 0:t.columnNotice}}],watch:{text:{immediate:!0,handler(e,t){this.$uv.test.array(e)||this.$uv.error("noticebar组件direction为column时，要求text参数为数组形式")}}},computed:{textStyle(){let e={};return e.color=this.color,e.fontSize=this.$uv.addUnit(this.fontSize),e},vertical(){return"horizontal"!=this.mode},swiperStyle:()=>({})},data:()=>({index:0}),methods:{noticeChange(e){this.index=e.detail.current,this.$emit("change",this.index)},clickHandler(){this.$emit("click",this.index)},close(){this.$emit("close")}}},[["render",function(e,t,o,i,l,n){const c=r(u("uv-icon"),a),s=x,z=C,T=w,N=$;return d(),p(s,{class:"uv-notice",onClick:n.clickHandler},{default:m((()=>[h(e.$slots,"icon",{},(()=>[e.icon?(d(),p(s,{key:0,class:"uv-notice__left-icon"},{default:m((()=>[y(c,{name:e.icon,color:e.color,size:"19"},null,8,["name","color"])])),_:1})):f("",!0)]),!0),y(N,{"disable-touch":e.disableTouch,vertical:!e.step,circular:"",interval:e.duration,autoplay:!e.disableScroll,class:"uv-notice__swiper",style:v([n.swiperStyle]),onChange:n.noticeChange},{default:m((()=>[(d(!0),_(g,null,S(e.text,((e,t)=>(d(),p(T,{key:t,class:"uv-notice__swiper__item"},{default:m((()=>[y(z,{class:"uv-notice__swiper__item__text uv-line-1",style:v([n.textStyle])},{default:m((()=>[k(b(e),1)])),_:2},1032,["style"])])),_:2},1024)))),128))])),_:1},8,["disable-touch","vertical","interval","autoplay","style","onChange"]),["link","closable"].includes(e.mode)?(d(),p(s,{key:0,class:"uv-notice__right-icon"},{default:m((()=>["link"===e.mode?(d(),p(c,{key:0,name:"arrow-right",size:17,color:e.color},null,8,["color"])):f("",!0),"closable"===e.mode?(d(),p(c,{key:1,name:"close",size:16,color:e.color,onClick:n.close},null,8,["color","onClick"])):f("",!0)])),_:1})):f("",!0)])),_:3},8,["onClick"])}],["__scopeId","data-v-23099dc5"]]);const N=z({name:"uv-row-notice",emits:["click","close"],mixins:[c,s,{props:{text:{type:String,default:""},icon:{type:[String,Boolean,null],default:"volume"},mode:{type:String,default:""},color:{type:String,default:"#f9ae3d"},bgColor:{type:String,default:"#fdf6ec"},fontSize:{type:[String,Number],default:14},speed:{type:[String,Number],default:80},...null==(i=null==(o=uni.$uv)?void 0:o.props)?void 0:i.rowNotice}}],data:()=>({animationDuration:"0",animationPlayState:"paused",nvueInit:!0,show:!0}),watch:{text:{immediate:!0,handler(e,t){this.vue(),this.$uv.test.string(e)||this.$uv.error("noticebar组件direction为row时，要求text参数为字符串形式")}},fontSize(){this.vue()},speed(){this.vue()}},computed:{textStyle(){let e={};return e.color=this.color,e.fontSize=this.$uv.addUnit(this.fontSize),e},animationStyle(){let e={};return e.animationDuration=this.animationDuration,e.animationPlayState=this.animationPlayState,e},innerText(){let e=[];const t=this.text?this.text.split(""):[];for(let o=0;o<t.length;o+=20)e.push(t.slice(o,o+20).join(""));return e}},mounted(){this.init()},methods:{init(){this.vue(),this.$uv.test.string(this.text)||this.$uv.error("noticebar组件direction为row时，要求text参数为字符串形式")},async vue(){let e=0;await this.$uv.sleep(),e=(await this.$uvGetRect(".uv-notice__content__text")).width,(await this.$uvGetRect(".uv-notice__content")).width,this.animationDuration=e/this.$uv.getPx(this.speed)+"s",this.animationPlayState="paused",setTimeout((()=>{this.animationPlayState="running"}),10)},async nvue(){},loopAnimation(e,t){},getNvueRect(e){},clickHandler(e){this.$emit("click")},close(){this.$emit("close")}}},[["render",function(e,t,o,i,l,n){const c=r(u("uv-icon"),a),s=x,w=C;return d(),p(s,{class:"uv-notice",onClick:n.clickHandler},{default:m((()=>[h(e.$slots,"icon",{},(()=>[e.icon?(d(),p(s,{key:0,class:"uv-notice__left-icon"},{default:m((()=>[y(c,{name:e.icon,color:e.color,size:"19"},null,8,["name","color"])])),_:1})):f("",!0)]),!0),y(s,{class:"uv-notice__content",ref:"uv-notice__content"},{default:m((()=>[y(s,{ref:"uv-notice__content__text",class:"uv-notice__content__text",style:v([n.animationStyle])},{default:m((()=>[(d(!0),_(g,null,S(n.innerText,((e,t)=>(d(),p(w,{key:t,style:v([n.textStyle])},{default:m((()=>[k(b(e),1)])),_:2},1032,["style"])))),128))])),_:1},8,["style"])])),_:1},512),["link","closable"].includes(e.mode)?(d(),p(s,{key:0,class:"uv-notice__right-icon"},{default:m((()=>["link"===e.mode?(d(),p(c,{key:0,name:"arrow-right",size:17,color:e.color},null,8,["color"])):f("",!0),"closable"===e.mode?(d(),p(c,{key:1,onClick:n.close,name:"close",size:16,color:e.color},null,8,["onClick","color"])):f("",!0)])),_:1})):f("",!0)])),_:3},8,["onClick"])}],["__scopeId","data-v-6203c3d1"]]);const B=z({name:"uv-notice-bar",emits:["click","close","change"],mixins:[c,s,{props:{text:{type:[Array,String],default:()=>[]},direction:{type:String,default:"row"},step:{type:Boolean,default:!1},icon:{type:[String,Boolean,null],default:"volume"},mode:{type:String,default:""},color:{type:String,default:"#f9ae3d"},bgColor:{type:String,default:"#fdf6ec"},speed:{type:[String,Number],default:80},fontSize:{type:[String,Number],default:14},duration:{type:[String,Number],default:2e3},url:{type:String,default:""},linkType:{type:String,default:"navigateTo"},disableTouch:{type:Boolean,default:!0},disableScroll:{type:Boolean,default:!1},...null==(n=null==(l=uni.$uv)?void 0:l.props)?void 0:n.noticeBar}}],data:()=>({show:!0}),methods:{click(e){this.$emit("click",e),this.url&&this.linkType&&this.openPage()},close(){this.show=!1,this.$emit("close")},change(e){this.$emit("change",e)}}},[["render",function(e,t,o,i,l,n){const a=r(u("uv-column-notice"),T),c=r(u("uv-row-notice"),N),s=x;return l.show?(d(),p(s,{key:0,class:"uv-notice-bar",style:v([{backgroundColor:e.bgColor},e.$uv.addStyle(e.customStyle)])},{default:m((()=>["column"===e.direction||"row"===e.direction&&e.step?(d(),p(a,{key:0,color:e.color,bgColor:e.bgColor,text:e.text,mode:e.mode,step:e.step,icon:e.icon,"disable-touch":e.disableTouch,"disable-scroll":e.disableScroll,fontSize:e.fontSize,duration:e.duration,onClose:n.close,onClick:n.click,onChange:n.change},null,8,["color","bgColor","text","mode","step","icon","disable-touch","disable-scroll","fontSize","duration","onClose","onClick","onChange"])):(d(),p(c,{key:1,color:e.color,bgColor:e.bgColor,text:e.text,mode:e.mode,fontSize:e.fontSize,speed:e.speed,url:e.url,linkType:e.linkType,icon:e.icon,onClose:n.close,onClick:n.click},null,8,["color","bgColor","text","mode","fontSize","speed","url","linkType","icon","onClose","onClick"]))])),_:1},8,["style"])):f("",!0)}],["__scopeId","data-v-d0b0fe18"]]);export{B as _};
