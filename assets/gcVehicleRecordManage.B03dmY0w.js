import{r as e,a0 as a,ai as t,s as d,a3 as i,a4 as r,a5 as l,a6 as o,a7 as c}from"./index-CPBjD6nT.js";const s=e=>e,{TIMEOUT:n,TOKEN_NAME:h,TOKEN_PREFIX:u,NO_TOKEN_BACK_URL:m}=c,g=e(0),v=e=>(e.header=e.header||{},a()&&!1!==(null==e?void 0:e.isToken)&&(e.header[h]=u+a()),new Promise(((a,c)=>{g.value++,uni.$snowy.modal.loading("努力加载中"),t({method:e.method||"GET",timeout:e.timeout||n,url:`${e.baseUrl||d.getters.allEnv[d.getters.envKey].baseUrl}${e.url}`,data:e.data,header:{domain:d.getters.tenantDomain,...e.header},dataType:e.dataType||"json"}).then((t=>{var s,n,h;const u=(null==(s=t.data)?void 0:s.code)||t.statusCode||200,g=(null==(n=t.data)?void 0:n.msg)||i[u]||i.default;r.includes(u)?(uni.$snowy.modal.confirm(g||"登录状态已过期，您可以清除缓存，重新进行登录?").then((()=>{d.commit("CLEAR_cache"),uni.$snowy.tab.reLaunch(l(m,o()))})),c("无效的会话，或者会话已过期，请重新登录。")):200!==u&&(uni.$snowy.modal.alert(g),c(u)),e.isReturnOriginalData?a(null==t?void 0:t.data):a(null==(h=null==t?void 0:t.data)?void 0:h.data)})).catch((e=>{let{errMsg:a}=e;"Network Error"===a?a="后端接口连接异常":a.includes("timeout")?a="系统接口请求超时":a.includes("Request failed with status code")?a="系统接口"+a.substr(a.length-3)+"异常":a.includes("request:fail")&&(a="请求失败"),uni.$snowy.modal.alert(a),c(e)})).finally((()=>{g.value--,0===g.value&&uni.$snowy.modal.closeLoading()}))}))),E={gcVehicleRecordList:e=>v({url:"/biz/gcvehiclerecord/list",method:"GET",data:e}),gcVehicleRecordDelete:e=>v({url:"/biz/gcvehiclerecord/delete",method:"post",data:e}),gcVehicleRecordAdd:e=>v({url:"/biz/gcvehiclerecord/miniProgramAdd",method:"POST",data:e}),gcVehicleRecordAddwhether:e=>v({url:"/biz/gcvehiclerecord/whether",method:"POST",data:e}),gcVehicleRecordEdit:e=>v({url:"/biz/gcvehiclerecord/miniProgramEdit",method:"POST",data:e}),gcVehicleRecordDetail:e=>v({url:"/biz/gcvehiclerecord/miniProgramDetail",method:"get",data:e}),gcVehicleRecordHisPage:e=>v({url:"/biz/gcvehiclerecordhistory/list",method:"GET",data:e}),gcVehicleRecordHisDetail:e=>v({url:"/biz/gcvehiclerecordhistory/miniProgramDetail",method:"GET",data:e}),gcVehicleRecordDelete:e=>v({url:"/biz/gcVehicleRecord/delete",method:"post",data:e})};export{E as g,s as p,v as r};
