import{r as e,d as l,e as a,j as t,f as i,w as s,k as n,l as u,F as o,H as d,G as c,y as r,t as p,m,K as h,u as f,i as v,aU as g,aV as _,aW as y,q as k,aD as x,V as b,W as A,x as C,S as V,ag as I,J as w,o as S,X as N,N as T,I as M}from"./index-CPBjD6nT.js";import{_ as z}from"./uv-input.D6qbiBl7.js";import{_ as j}from"./uv-button.DCe9cTzF.js";import{_ as D}from"./uv-icon.BeAryk0A.js";import{_ as $}from"./uv-textarea.BYsIvzb4.js";import{_ as O}from"./uni-popup.DLkoZhRS.js";import{_ as J}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as U,a as P}from"./uv-checkbox-group.Cn29mtdQ.js";import{o as H,p as R,q as L,r as B,t as F,u as E,f as q,v as G}from"./bizScheduApi.BbFgL-ID.js";import"./uv-loading-icon.Bz59kkyK.js";import"./uni-popup.vue_vue_type_style_index_0_scoped_f28c6336_lang.COK6mCff.js";const W=J({__name:"index",props:{title:{type:String,default:"选择人员"},selectMore:{type:Boolean,default:!1}},emits:["getPerson","closeP"],setup(x,{expose:b,emit:A}){const C=A,V=e(null),I=e(),w=e([]),S=e(),N=e([]),T=e();e([]);const M=e=>{console.log(e,"ename")},z=()=>{0!=N.value.length?(C("getPerson",N.value),V.value.close()):h({title:"请选择组长",icon:"none",duration:2e3})},j=()=>{V.value.close(),N.value=[],S.value=-1,w.value=[]};e("");return b({initOpen:e=>{I.value=e.filter((e=>e.children.length>0)),w.value=[],V.value.open()},getData:e=>{N.value=e}}),(e,b)=>{const A=f,C=v,D=g,$=_,J=y,U=k,P=l(a("uni-popup"),O);return t(),i(P,{type:"bottom",ref_key:"popupRef",ref:V,"mask-click":!1},{default:s((()=>[n(C,{class:"select_header"},{default:s((()=>[n(C,{style:{display:"flex","justify-content":"space-between","align-items":"center"}},{default:s((()=>[n(A,{style:{},size:"mini",onClick:j},{default:s((()=>[u("取消")])),_:1})])),_:1}),n(C,null,{default:s((()=>[n(A,{style:{},size:"mini",type:"primary",onClick:z,plain:""},{default:s((()=>[u("确认")])),_:1})])),_:1})])),_:1}),n(C,{class:"selectBox"},{default:s((()=>[n(C,{class:"left_select"},{default:s((()=>[(t(!0),o(d,null,c(I.value,((e,l)=>(t(),i(C,{onClick:l=>((e,l)=>{S.value=e.depName,w.value=e.children})(e),class:r(S.value==e.depName?"left_select_item selectIng":"left_select_item"),key:l},{default:s((()=>[u(p(e.depName),1)])),_:2},1032,["onClick","class"])))),128))])),_:1}),1==x.selectMore?(t(),i(C,{key:0,class:"right_select"},{default:s((()=>[n(C,{class:"uni-list"},{default:s((()=>[n(J,{onChange:M},{default:s((()=>[(t(!0),o(d,null,c(w.value,(e=>(t(),i($,{class:"checkLabel",key:e.id},{default:s((()=>[n(C,null,{default:s((()=>[n(D,{value:e},null,8,["value"])])),_:2},1024),n(C,null,{default:s((()=>[u(p(e.name),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})):m("",!0),0==x.selectMore?(t(),i(C,{key:1,class:"right_select"},{default:s((()=>[(t(!0),o(d,null,c(w.value,((e,l)=>(t(),i(C,{onClick:l=>((e,l)=>{console.log(e),(e.tempDisabled||e.disabled)&&!e.self||e.zyN?h({title:"当前员工已被选，请另选他人",duration:1e3,icon:"none"}):(T.value=e.id,N.value=[e],console.log(N.value))})(e),class:r(T.value==e.id?"right_select_item selectIng":"right_select_item"),key:l},{default:s((()=>[u(p(e.name)+" ",1),e.disabled||e.tempDisabled?(t(),i(U,{key:0,style:{"font-size":"13px","font-weight":"bold",color:"red"}},{default:s((()=>[u("已被选")])),_:1})):m("",!0)])),_:2},1032,["onClick","class"])))),128))])),_:1})):m("",!0)])),_:1})])),_:1},512)}}},[["__scopeId","data-v-c7da48b2"]]);const K=J({data:()=>({scrollHeight:400,scrollTopSize:0,fillHeight:0,leftArray:[],mainArray:[],topArr:[],leftIndex:0,changeList:[],AllData:[],scrollInto:"",tempArrs:[],checkModel:[]}),computed:{leftIntoView(){return"left-"+(this.leftIndex>3?this.leftIndex-3:0)}},methods:{changeUv(e){console.log(e),console.log("this.checkModel",this.checkModel)},closeP(){this.$refs.popup.close()},subMit(){this.$emit("subMit",this.checkModel),this.closeP()},changeName(e){console.log("this.checkModel",this.checkModel);let l=e.detail.value;this.arrs=l;let a={};this.tempArrs.length>this.arrs.length?(a.data=this.tempArrs.filter((e=>!this.arrs.includes(e))),a.num=-1):(a.data=this.arrs.filter((e=>!this.tempArrs.includes(e))),a.num=1);let t=a.data[0],i=this.AllData.findIndex((e=>e==t));i>=0?this.AllData.splice(i,1):this.AllData.push(t),console.log("this.AllData",this.AllData),this.tempArrs=JSON.parse(JSON.stringify(this.arrs))},flattenChildren:e=>e.reduce(((e,l)=>e.concat(l,flattenChildren(l.children||[]))),[]),initData(e){console.log("data",e),this.$refs.popup.open(),setTimeout((()=>{this.initScrollView().then((()=>{setTimeout((()=>{this.leftArray=e.map((e=>e.depName)),this.mainArray=e;let l=this.mainArray.map((e=>e.children.map((e=>{if(e.checked&&e.zy)return e.name}))));this.checkModel=l.flat().filter((e=>null!=e)),setTimeout((()=>{this.getElementTop()}),100)}),200)}))}),100)},initScrollView(){return new Promise(((e,l)=>{x().select("#scroll-panel").boundingClientRect((l=>{console.log(l),this.scrollTopSize=l.top,this.scrollHeight=l.height,setTimeout((()=>{e()}),100)})).exec()}))},getListData(){new Promise(((e,l)=>{b();setTimeout((()=>{let l=(()=>{let[e,l]=[[],[]],a=Math.floor(40*Math.random());a=a<20?20:a;for(let t=0;t<a;t++){e.push(`${t+1}类商品`);let a=[],i=Math.floor(10*Math.random());i=i<5?5:i;for(let e=0;e<i;e++)a.push(e);l.push({title:`第${t+1}类商品标题`,list:a})}return{left:e,main:l}})(),{left:a,main:t}=l;e({left:a,main:t})}),1e3)})).then((e=>{console.log("-----------请求接口返回数据示例-------------"),console.log(e),A(),this.leftArray=e.left,this.mainArray=e.main,console.log("leftArray",this.leftArray),console.log("mainArray",this.mainArray),setTimeout((()=>{this.getElementTop()}),100)}))},getElementTop(){new Promise(((e,l)=>{x().selectAll(".main-item").boundingClientRect((l=>{e(l)})).exec()})).then((e=>{let l=e.map((e=>e.top-this.scrollTopSize));this.topArr=l;let a=e[e.length-1].height;a-20<this.scrollHeight&&(this.fillHeight=this.scrollHeight-a+20)}))},mainScroll(e){clearTimeout(this.mainThrottle),this.mainThrottle=setTimeout((()=>{l()}),10);let l=()=>{let l=e.detail.scrollTop,a=0;for(let e=this.topArr.length-1;e>=0;e--)if(l>=this.topArr[e]){a=e;break}this.leftIndex=a<0?0:a}},leftTap(e,l){let a=e.currentTarget.dataset.index;this.scrollInto=`item-${a}`}}},[["render",function(e,r,m,h,f,g){const _=v,y=V,x=k,b=l(a("uv-checkbox"),U),A=l(a("uv-checkbox-group"),P),I=l(a("uni-popup"),O);return t(),i(I,{type:"bottom",ref:"popup","mask-click":!1},{default:s((()=>[n(_,{style:{height:"60vh"}},{default:s((()=>[n(_,{class:"container"},{default:s((()=>[n(_,{class:"top--panel"},{default:s((()=>[n(_,{style:{"background-color":"#1289A7","text-align":"center","font-size":"28rpx",padding:"10px 0",color:"#fff",display:"flex","justify-content":"space-between","align-items":"center"},onClick:g.closeP},{default:s((()=>[n(_,null,{default:s((()=>[u("取消")])),_:1}),n(_,{onClick:g.subMit},{default:s((()=>[u(" 确定 ")])),_:1},8,["onClick"])])),_:1},8,["onClick"])])),_:1}),n(_,{class:"scroll-panel",id:"scroll-panel"},{default:s((()=>[n(_,{class:"list-box"},{default:s((()=>[n(_,{class:"left"},{default:s((()=>[n(y,{"scroll-y":"true",style:C({height:f.scrollHeight+"px"}),"scroll-with-animation":!1},{default:s((()=>[(t(!0),o(d,null,c(f.leftArray,((e,l)=>(t(),i(_,{class:"item",key:l,id:"left-"+l,"data-index":l,onClick:e=>g.leftTap(e,l)},{default:s((()=>[u(p(e),1)])),_:2},1032,["id","data-index","onClick"])))),128))])),_:1},8,["style"])])),_:1}),n(_,{class:"main"},{default:s((()=>[n(y,{"scroll-y":"true",style:C({height:f.scrollHeight+"px"}),onScroll:g.mainScroll,"scroll-into-view":f.scrollInto,"scroll-with-animation":!1},{default:s((()=>[n(A,{modelValue:f.checkModel,"onUpdate:modelValue":r[0]||(r[0]=e=>f.checkModel=e),placement:"column",iconPlacement:"left",onChange:g.changeUv},{default:s((()=>[(t(!0),o(d,null,c(f.mainArray,((e,l)=>(t(),i(_,{class:"item main-item",key:l,id:"item-"+l},{default:s((()=>[n(_,{class:"title"},{default:s((()=>[n(_,null,{default:s((()=>[u(p(f.leftArray[l]),1)])),_:2},1024)])),_:2},1024),(t(!0),o(d,null,c(e.children,((e,l)=>(t(),i(b,{class:"checkLabel",customStyle:{marginBottom:"8px"},disabled:e.disabled,key:l,name:e.name,checked:e.checked&&e.zy&&f.checkModel.includes(e.name)},{default:s((()=>[n(_,{style:{"font-size":"15px"}},{default:s((()=>[u(p(e.name)+" ",1),n(x,{style:{color:"red","font-size":"13px","font-weight":"bold"}},{default:s((()=>[u(p(e.disabled?"已被选":""),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["disabled","name","checked"])))),128))])),_:2},1032,["id"])))),128))])),_:1},8,["modelValue","onChange"]),n(_,{class:"fill-last",style:C({height:f.fillHeight+"px"})},null,8,["style"])])),_:1},8,["style","onScroll","scroll-into-view"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},512)}],["__scopeId","data-v-d8980aa1"]]);const X=J({data:()=>({scrollHeight:400,scrollTopSize:0,fillHeight:0,leftArray:[],mainArray:[],topArr:[],leftIndex:0,changeList:[],AllData:[],scrollInto:"",tempArrs:[],checkModel:[]}),computed:{leftIntoView(){return"left-"+(this.leftIndex>3?this.leftIndex-3:0)}},methods:{changeUv(e){console.log(e),console.log("this.checkModel",this.checkModel)},closeP(){this.$refs.popup.close()},subMit(){this.$emit("subMit",this.checkModel),this.closeP()},changeName(e){console.log("this.checkModel",this.checkModel);let l=e.detail.value;this.arrs=l;let a={};this.tempArrs.length>this.arrs.length?(a.data=this.tempArrs.filter((e=>!this.arrs.includes(e))),a.num=-1):(a.data=this.arrs.filter((e=>!this.tempArrs.includes(e))),a.num=1);let t=a.data[0],i=this.AllData.findIndex((e=>e==t));i>=0?this.AllData.splice(i,1):this.AllData.push(t),console.log("this.AllData",this.AllData),this.tempArrs=JSON.parse(JSON.stringify(this.arrs))},flattenChildren:e=>e.reduce(((e,l)=>e.concat(l,flattenChildren(l.children||[]))),[]),initData(e){console.log("data",e),this.$refs.popup.open(),setTimeout((()=>{this.initScrollView().then((()=>{setTimeout((()=>{this.leftArray=e.filter((e=>e.children.length>0)).map((e=>e.depName)),this.mainArray=e.filter((e=>e.children.length>0)),console.log("this.mainArray",this.mainArray);let l=this.mainArray.map((e=>e.children.map((e=>{if(e.checked&&e.zy)return e.name}))));this.checkModel=l.flat().filter((e=>null!=e)),setTimeout((()=>{this.getElementTop()}),100)}),200)}))}),100)},initScrollView(){return new Promise(((e,l)=>{x().select("#scroll-panel").boundingClientRect((l=>{console.log(l),this.scrollTopSize=l.top,this.scrollHeight=l.height,setTimeout((()=>{e()}),100)})).exec()}))},getElementTop(){new Promise(((e,l)=>{x().selectAll(".main-item").boundingClientRect((l=>{e(l)})).exec()})).then((e=>{let l=e.map((e=>e.top-this.scrollTopSize));this.topArr=l;let a=e[e.length-1].height;a-20<this.scrollHeight&&(this.fillHeight=this.scrollHeight-a+20)}))},mainScroll(e){clearTimeout(this.mainThrottle),this.mainThrottle=setTimeout((()=>{l()}),10);let l=()=>{let l=e.detail.scrollTop,a=0;for(let e=this.topArr.length-1;e>=0;e--)if(l>=this.topArr[e]){a=e;break}this.leftIndex=a<0?0:a}},leftTap(e,l){let a=e.currentTarget.dataset.index;this.scrollInto=`item-${a}`}}},[["render",function(e,r,m,h,f,g){const _=v,y=V,x=k,b=l(a("uv-checkbox"),U),A=l(a("uv-checkbox-group"),P),I=l(a("uni-popup"),O);return t(),i(I,{type:"bottom",ref:"popup","mask-click":!1},{default:s((()=>[n(_,{style:{height:"60vh"}},{default:s((()=>[n(_,{class:"container"},{default:s((()=>[n(_,{class:"top--panel"},{default:s((()=>[n(_,{style:{"background-color":"#1289a7","text-align":"center","font-size":"28rpx",padding:"10px 0",color:"#fff",display:"flex","justify-content":"space-between","align-items":"center"},onClick:g.closeP},{default:s((()=>[n(_,null,{default:s((()=>[u("取消")])),_:1}),n(_,{onClick:g.subMit},{default:s((()=>[u(" 确定 ")])),_:1},8,["onClick"])])),_:1},8,["onClick"])])),_:1}),n(_,{class:"scroll-panel",id:"scroll-panel"},{default:s((()=>[n(_,{class:"list-box"},{default:s((()=>[n(_,{class:"left"},{default:s((()=>[n(y,{"scroll-y":"true",style:C({height:f.scrollHeight+"px"}),"scroll-with-animation":!1},{default:s((()=>[(t(!0),o(d,null,c(f.leftArray,((e,l)=>(t(),i(_,{class:"item",key:l,id:"left-"+l,"data-index":l,onClick:e=>g.leftTap(e,l)},{default:s((()=>[u(p(e),1)])),_:2},1032,["id","data-index","onClick"])))),128))])),_:1},8,["style"])])),_:1}),n(_,{class:"main"},{default:s((()=>[n(y,{"scroll-y":"true",style:C({height:f.scrollHeight+"px"}),onScroll:g.mainScroll,"scroll-into-view":f.scrollInto,"scroll-with-animation":!1},{default:s((()=>[n(A,{modelValue:f.checkModel,"onUpdate:modelValue":r[0]||(r[0]=e=>f.checkModel=e),placement:"column",iconPlacement:"left",onChange:g.changeUv},{default:s((()=>[(t(!0),o(d,null,c(f.mainArray,((e,l)=>(t(),i(_,{class:"item main-item",key:l,id:"item-"+l},{default:s((()=>[n(_,{class:"title"},{default:s((()=>[n(_,null,{default:s((()=>[u(p(f.leftArray[l]),1)])),_:2},1024)])),_:2},1024),(t(!0),o(d,null,c(e.children,((e,l)=>(t(),i(b,{class:"checkLabel",customStyle:{marginBottom:"8px"},key:l,disabled:e.disabled||e.tempDisabled,name:e.name,checked:e.checked&&e.zy&&f.checkModel.includes(e.name)},{default:s((()=>[n(_,{style:{"font-size":"15px"}},{default:s((()=>[u(p(e.name)+" ",1),n(x,{style:{color:"red","font-size":"13px","font-weight":"bold"}},{default:s((()=>[u(p(e.disabled?"已被选":""),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["disabled","name","checked"])))),128))])),_:2},1032,["id"])))),128))])),_:1},8,["modelValue","onChange"]),n(_,{class:"fill-last",style:C({height:f.fillHeight+"px"})},null,8,["style"])])),_:1},8,["style","onScroll","scroll-into-view"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},512)}],["__scopeId","data-v-689c59fc"]]);const Y=J({data:()=>({value:"",list:[],tempArr:[],type:"",handleInput:""}),methods:{initS(e,l=null){this.list=e,this.type=l,this.handleInput="",this.tempArr=JSON.parse(JSON.stringify(e)),this.$refs.popup.open()},inputFn(e){this.list=""==e?this.tempArr:this.tempArr.filter((l=>l.label.includes(e)))},open(){this.$refs.popup.open()},close(){this.$refs.popup.close()},clickItem(e){console.log("item",e),console.log("item",e),this.$emit("clickItem",e),this.$refs.popup.close()},confirmInput(){let e={label:this.handleInput,flwNumber:""};this.$emit("clickItem",e),this.$refs.popup.close()}}},[["render",function(e,h,f,g,_,y){const x=l(a("uv-input"),z),b=v,A=l(a("uv-button"),j),C=k,V=I("viewz"),w=l(a("uni-popup"),O);return t(),i(w,{type:"bottom",ref:"popup"},{default:s((()=>[n(b,{class:"radioAll",style:{width:"100%",display:"flex","flex-direction":"column",background:"#fff"}},{default:s((()=>[n(b,null,{default:s((()=>[n(x,{placeholder:"请输入搜索",modelValue:e.filterValue,"onUpdate:modelValue":h[0]||(h[0]=l=>e.filterValue=l),clearable:"",onInput:y.inputFn,style:{width:"100%",height:"30px"}},null,8,["modelValue","onInput"])])),_:1}),"工程"==_.type?(t(),i(b,{key:0,style:{width:"100%",height:"30px",display:"flex","justify-content":"space-evenly","margin-top":"5px"}},{default:s((()=>[n(x,{placeholder:"请输入工程名称",modelValue:_.handleInput,"onUpdate:modelValue":h[1]||(h[1]=e=>_.handleInput=e),clearable:"",style:{width:"80%",height:"18px"}},null,8,["modelValue"]),n(A,{style:{width:"15%"},onClick:y.confirmInput,type:"primary"},{default:s((()=>[u("确定")])),_:1},8,["onClick"])])),_:1})):m("",!0),n(V,{style:{overflow:"auto",height:"500px"}},{default:s((()=>[(t(!0),o(d,null,c(_.list,((e,l)=>(t(),i(b,{onClick:l=>y.clickItem(e),class:"selectOne",key:l},{default:s((()=>[u(p(e.label)+" ",1),1==e.disabled?(t(),i(C,{key:0,class:r(e.disabled?"currentDisabled":"")},{default:s((()=>[u("已被选")])),_:2},1032,["class"])):m("",!0)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1},512)}],["__scopeId","data-v-83f90a1f"]]);const Z=J({data:()=>({value:"",list:[],tempArr:[]}),props:{searchPlaceholder:{type:String,default:"请输入车牌号"},modalText:{type:String,default:"当前车辆已被安排出班，请确认是否仍然使用该车辆"}},methods:{initS(e){this.list=e,console.log("this.list",this.list),this.tempArr=JSON.parse(JSON.stringify(e)),this.$refs.popup.open()},inputFn(e){this.list=""==e?this.tempArr:this.tempArr.filter((l=>l.label.includes(e)))},disClass(e){},open(){this.$refs.popup.open()},close(){this.$refs.popup.close()},clickItem(e,l){1==e.disabled?w({title:"提示",content:this.modalText,success:l=>{l.confirm?(this.$emit("clickItem",e),this.$refs.popup.close()):l.cancel}}):(this.$emit("clickItem",e),this.$refs.popup.close())}}},[["render",function(e,h,f,g,_,y){const x=l(a("uv-input"),z),b=v,A=k,C=l(a("uni-popup"),O);return t(),i(C,{type:"bottom",ref:"popup"},{default:s((()=>[n(b,{class:"radioAll",style:{width:"100%",height:"60vh",display:"flex","flex-direction":"column",background:"#fff"}},{default:s((()=>[n(b,null,{default:s((()=>[n(x,{modelValue:e.filterValue,"onUpdate:modelValue":h[0]||(h[0]=l=>e.filterValue=l),clearable:"",placeholder:f.searchPlaceholder,onInput:y.inputFn,style:{width:"100%",height:"30px"}},null,8,["modelValue","placeholder","onInput"])])),_:1}),n(b,{style:{overflow:"auto"}},{default:s((()=>[(t(!0),o(d,null,c(_.list,((e,l)=>(t(),i(b,{onClick:l=>y.clickItem(e),class:"selectOne",key:l},{default:s((()=>[u(p(e.label)+" ",1),1==e.disabled?(t(),i(A,{key:0,class:r(e.disabled?"currentDisabled":"")},{default:s((()=>[u("已被选")])),_:2},1032,["class"])):m("",!0)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1},512)}],["__scopeId","data-v-20185e79"]]),Q=J({__name:"addSchedule",setup(o){const d=e(),c=e(),r=e(),m=e(),x=e(),b=e();S((e=>{var l,a;console.log(e),console.log("onLoad"),e.id?(console.log(e,"有值"),N({title:"修改排班"}),H({id:JSON.parse(e.id).id}).then((e=>{console.log(e,"kdo"),Ce.value.projectId=e.data.projectId})),c.value="edit",d.value=JSON.parse(e.id),Ce.value=d.value,r.value=d.value.date,Ce.value.members=null==(l=d.value.members)?void 0:l.split(","),Ce.value.device=null==(a=d.value.device)?void 0:a.split(","),Ie.value=d.value.leader,we.value=d.value.members,Ve.value=d.value.name,Se.value=d.value.device,Ne.value=d.value.vehicle,Te.value=d.value.driver):e.date?(console.log(e,"有值"),r.value=e.date,c.value="add"):(console.log("无值"),c.value="add"),console.log("statusVB.value",c.value),Ae()}));const A=()=>{let e=Ce.value.notes;e&&e.split("/").map((e=>{if(e.includes("-")){let l=e.split("-");"外住"==l[0]&&(le.value.name="外住",le.value.value=l[1],le.value.check=!0),"早班"==l[0]&&(ae.value.name="早班",ae.value.value=l[1],ae.value.check=!0),"夜班"==l[0]&&(te.value.name="夜班",te.value.value=l[1],te.value.check=!0),"解决问题"==l[0]&&(se.value.name="解决问题",se.value.check=!0),"其他"==l[0]&&(ie.value.name="其他",ie.value.value=l[1],ie.value.check=!0)}else"外住"==e?(le.value.name="外住",le.value.check=!0):"早班"==e?(ae.value.name="早班",ae.value.check=!0):"夜班"==e?(te.value.name="夜班",te.value.check=!0):"解决问题"==e?(se.value.name="解决问题",se.value.check=!0):(ie.value.name="其他",ie.value.check=!0)})),m.value.open(),b.value={}};e([]);const C=e([]),V=e(""),I=e([]),w=e(""),J=e([]),U=e([]),P=e(""),Q=e([]),ee=e(""),le=e({}),ae=e({}),te=e({}),ie=e({}),se=e({}),ne=e([]),ue=e=>ne.value.findIndex((l=>l.name===e)),oe=e=>{if(e.detail.value.length>0)C.value=!1,le.value.name="外住",ne.value.push(le.value);else{C.value=!0,V.value="",le.value={};let e=ue("外住");ne.value.splice(e,1)}console.log("arrr.value",ne.value)},de=e=>{if(e.detail.value.length>0)I.value=!1,ae.value.name="早班",ne.value.push(ae.value);else{I.value=!0,w.value="";let e=ue("早班");ae.value={},ne.value.splice(e,1)}},ce=e=>{if(e.detail.value.length>0)J.value=!1,te.value.name="夜班",ne.value.push(te.value);else{J.value=!0,P.value="",te.value={};let e=ue("夜班");ne.value.splice(e,1)}},re=e=>{if(e.detail.value.length>0)U.value=!1,se.value.name="解决问题",ne.value.push(se.value);else{U.value=!0,se.value={},se.value={};let e=ue("解决问题");ne.value.splice(e,1)}},pe=e=>{if(e.detail.value.length>0)Q.value=!1,ie.value.name="其他",ne.value.push(ie.value);else{Q.value=!0,ee.value="",ie.value={};let e=ue("其他");ne.value.splice(e,1)}},me=()=>{C.value=!0,I.value=!0,J.value=!0,U.value=!0,Q.value=!0,V.value="",w.value="",P.value="",ee.value="",m.value.close()},he=()=>{console.log("arrr.value",ne.value);const e=ne.value.map((e=>e.value?`${e.name}-${e.value}`:e.name)).join("/");console.log("stringRepresentation",e),x.value=e,Ce.value.notes=e,m.value.close(),le.value={},ae.value={},te.value={},ie.value={},se.value={}},fe=e(),ve=e(),ge=e(),_e=e(),ye=e(),ke=e(),xe=e(),be=e(),Ae=()=>{R({date:r.value,id:"edit"==c.value?d.value.id:null}).then((e=>{fe.value=e.data,ge.value=JSON.parse(JSON.stringify(e.data)),be.value=e.data.map((e=>e.children)).flat()})),L({date:r.value,id:"edit"==c.value?d.value.id:null}).then((e=>{e.data.map((e=>{e.depName=e.type})),ve.value=e.data,xe.value=e.data.map((e=>e.children)).flat()})),B({date:r.value,id:"edit"==c.value?d.value.id:null}).then((e=>{ye.value=e.data.reverse()})),F({date:r.value,id:"edit"==c.value?d.value.id:null}).then((e=>{_e.value=e.data})),E({date:r.value,id:"edit"==c.value?d.value.id:null}).then((e=>{ke.value=e.data}))},Ce=e({}),Ve=e(""),Ie=e(""),we=e(""),Se=e(""),Ne=e(""),Te=e("");e("");const Me=e(),ze=e(),je=e();e();const De=e();e([{value:"篮球",text:"篮球"},{value:"足球",text:"足球"},{value:"游泳",text:"游泳"}]),e([{depName:"地信中心",children:[{name:"张三",id:12},{name:"李四",id:22},{name:"张三",id:13},{name:"李四",id:23,disabled:!0,checked:!0,self:!0},{name:"张三",id:14},{name:"李四",id:25},{name:"张三",id:16},{name:"李四",id:26}]},{depName:"地信中心一部",children:[{name:"张三1",id:31},{name:"李四1",id:42},{name:"张三",id:147},{name:"李四",id:29}]},{depName:"地信中心二部",children:[{name:"张三2",id:51},{name:"李四2",id:65}]},{depName:"地信中心二部",children:[{name:"张三3",id:52},{name:"李四2",id:64}]},{depName:"地信中心二部",children:[{name:"张三4",id:53},{name:"李四2",id:63}]},{depName:"地信中心二部",children:[{name:"张三5",id:54},{name:"李四2",id:62}]},{depName:"地信中心二部",children:[{name:"张三6",id:55},{name:"李四2",id:61}]}]);const $e=e(),Oe=()=>{$e.value.initS(ye.value,"工程")},Je=()=>{Me.value.initOpen(fe.value)};e();const Ue=e=>{console.log(e),fe.value=JSON.parse(JSON.stringify(ge.value)),e.length>0?(we.value=e.join(","),Ce.value.members=e):(we.value="",Ce.value.members=[]),console.log("ryData.value",fe.value),console.log("addValue.value",Ce.value)},Pe=e=>{e.length>0?(Se.value=e.join(","),Ce.value.device=e):(Se.value="",Ce.value.device=[])},He=e=>{console.log(e),Te.value=e.label,Ce.value.driver=e.label},Re=e=>{console.log(e),Ne.value=e.label,Ce.value.vehicle=e.label},Le=e=>{console.log(e),Ve.value=e.label,Ce.value.projectId=e.flwNumber,Ce.value.name=e.label},Be=()=>{let e=JSON.parse(JSON.stringify(fe.value));Ce.value.members&&Ce.value.members.length>0&&(e.map((e=>{e.children.map((e=>{Ce.value.members.includes(e.name)?(e.zy=!0,e.checked=!0):(e.zy=!1,e.checked=!1)}))})),console.log("ryData.value",e)),ze.value.initData(e)},Fe=()=>{let e=JSON.parse(JSON.stringify(ve.value));Ce.value.device&&Ce.value.device.length>0&&(e.map((e=>{e.children.map((e=>{Ce.value.device.includes(e.name)?(e.zy=!0,e.checked=!0):(e.zy=!1,e.checked=!1)}))})),console.log("ryData.value",e)),je.value.initData(e)},Ee=e(),qe=e=>{Ee.value.initS(ke.value)},Ge=e=>{De.value.initS(_e.value)},We=e([]),Ke=e=>{console.log("data",e),fe.value=JSON.parse(JSON.stringify(ge.value)),We.value=e,Ie.value=e[0].name,Ce.value.leader=Ie.value,fe.value.map((e=>{e.children.map((e=>{e.name==Ie.value&&(e.tempDisabled=!0)}))}))},Xe=()=>{console.log(Ce.value),console.log("addValue.value",c.value),"add"==c.value?Ce.value.departureDate=r.value:c.value,console.log("addValue",Ce.value),q(Ce.value).then((e=>{console.log(e),200==e.code&&T()}))},Ye=()=>{Ce.value.name?("add"==c.value?Ce.value.departureDate=r.value:c.value,console.log("addValue.value",Ce.value),G(Ce.value).then((e=>{console.log(e),200==e.code&&T()}))):h({title:"暂存流程请选择工程",duration:2e3,icon:"none"})};return(e,o)=>{const d=v,c=l(a("uv-input"),z),r=l(a("uv-button"),j),h=l(a("uv-icon"),D),b=l(a("uv-textarea"),$),V=f,w=k,S=g,N=_,T=y,U=M,P=l(a("uni-popup"),O);return t(),i(d,{class:"mainAdd"},{default:s((()=>[n(d,{class:"mainBox"},{default:s((()=>[n(d,{class:"add_item"}),n(d,{class:"add_item"},{default:s((()=>[n(d,null,{default:s((()=>[u("工程编号：")])),_:1}),n(d,{class:"item_after"},{default:s((()=>[u(p(Ce.value.projectId),1)])),_:1})])),_:1}),n(d,{class:"add_item"},{default:s((()=>[n(d,null,{default:s((()=>[u("选择工程：")])),_:1}),n(d,{class:"item_after",style:{width:"56%"}},{default:s((()=>[n(c,{type:"text",modelValue:Ve.value,"onUpdate:modelValue":o[0]||(o[0]=e=>Ve.value=e),disabled:""},null,8,["modelValue"])])),_:1}),n(d,{class:"moreIcon",onClick:Oe},{default:s((()=>[n(r,{icon:"list",plain:!0})])),_:1}),n(h,{style:{"margin-left":"5px"},name:"close",size:"28",onClick:o[1]||(o[1]=e=>(Ce.value.projectId="",Ce.value.name="",Ve.value=""))})])),_:1}),n(d,{class:"add_item"},{default:s((()=>[n(d,null,{default:s((()=>[u("选择组长：")])),_:1}),n(d,{class:"item_after"},{default:s((()=>[n(c,{type:"text",modelValue:Ie.value,"onUpdate:modelValue":o[2]||(o[2]=e=>Ie.value=e),disabled:""},null,8,["modelValue"])])),_:1}),n(d,{class:"moreIcon",onClick:Je},{default:s((()=>[n(r,{icon:"list",plain:!0})])),_:1}),n(h,{style:{"margin-left":"5px"},name:"close",size:"28",onClick:o[3]||(o[3]=e=>(Ce.value.leader="",Ie.value=""))})])),_:1}),n(d,{class:"add_item"},{default:s((()=>[n(d,null,{default:s((()=>[u("选择组员：")])),_:1}),n(d,{class:"item_after"},{default:s((()=>[n(b,{"auto-height":!0,"adjust-position":!1,disabled:"",modelValue:we.value,"onUpdate:modelValue":o[4]||(o[4]=e=>we.value=e)},null,8,["modelValue"])])),_:1}),n(d,{class:"moreIcon",onClick:Be},{default:s((()=>[n(r,{icon:"list",plain:!0})])),_:1}),n(h,{style:{"margin-left":"5px"},name:"close",size:"28",onClick:o[5]||(o[5]=e=>(Ce.value.members="",we.value=""))})])),_:1}),n(d,{class:"add_item"},{default:s((()=>[n(d,null,{default:s((()=>[u("仪器编号：")])),_:1}),n(d,{class:"item_after"},{default:s((()=>[n(b,{"auto-height":!0,"adjust-position":!1,disabled:"",modelValue:Se.value,"onUpdate:modelValue":o[6]||(o[6]=e=>Se.value=e)},null,8,["modelValue"])])),_:1}),n(d,{class:"moreIcon",onClick:Fe},{default:s((()=>[n(r,{icon:"list",plain:!0})])),_:1}),n(h,{style:{"margin-left":"5px"},name:"close",size:"28",onClick:o[7]||(o[7]=e=>(Ce.value.device="",Se.value=""))})])),_:1}),n(d,{class:"add_item"},{default:s((()=>[n(d,null,{default:s((()=>[u("选择车辆：")])),_:1}),n(d,{class:"item_after",style:{width:"56%"}},{default:s((()=>[n(c,{type:"text",disabled:"",modelValue:Ne.value,"onUpdate:modelValue":o[8]||(o[8]=e=>Ne.value=e)},null,8,["modelValue"])])),_:1}),n(d,{class:"moreIcon",onClick:qe},{default:s((()=>[n(r,{icon:"list",plain:!0})])),_:1}),n(h,{style:{"margin-left":"5px"},name:"close",size:"28",onClick:o[9]||(o[9]=e=>(Ce.value.vehicle="",Ne.value=""))})])),_:1}),n(d,{class:"add_item"},{default:s((()=>[n(d,null,{default:s((()=>[u("选择司机：")])),_:1}),n(d,{class:"item_after",style:{width:"56%"}},{default:s((()=>[n(c,{type:"text",disabled:"",modelValue:Te.value,"onUpdate:modelValue":o[10]||(o[10]=e=>Te.value=e)},null,8,["modelValue"])])),_:1}),n(d,{class:"moreIcon",onClick:Ge},{default:s((()=>[n(r,{icon:"list",plain:!0})])),_:1}),n(h,{style:{"margin-left":"5px"},name:"close",size:"28",onClick:o[11]||(o[11]=e=>(Ce.value.driver="",Te.value=""))})])),_:1}),n(d,{class:"add_item"},{default:s((()=>[n(d,null,{default:s((()=>[u("补充备注：")])),_:1}),n(d,{class:"item_after"},{default:s((()=>[n(c,{modelValue:x.value,"onUpdate:modelValue":o[12]||(o[12]=e=>x.value=e),disabled:""},null,8,["modelValue"])])),_:1}),n(d,{class:"moreIcon",onClick:A},{default:s((()=>[n(r,{icon:"list",plain:!0})])),_:1})])),_:1})])),_:1}),n(d,{class:"mainFooter"},{default:s((()=>[n(V,{class:"f_btn",type:"primary",onClick:Ye},{default:s((()=>[u("暂存")])),_:1}),n(V,{class:"f_btn",type:"primary",onClick:Xe},{default:s((()=>[u("提交")])),_:1})])),_:1}),n(P,{type:"bottom",ref_key:"popupNote",ref:m},{default:s((()=>[n(d,{style:{width:"100%",height:"350px",background:"#fff"}},{default:s((()=>[n(d,{style:{display:"flex","justify-content":"space-between","align-items":"center","border-bottom":"1px solid",padding:"5px","font-size":"16px","font-weight":"bold"}},{default:s((()=>[n(w,{onClick:me},{default:s((()=>[u("取消")])),_:1}),n(w,{onClick:he},{default:s((()=>[u("确定")])),_:1})])),_:1}),n(d,{style:{display:"flex","justify-content":"flex-start",width:"95%",margin:"0 auto","padding-top":"10px","align-items":"center"}},{default:s((()=>[n(T,{onChange:oe,customStyle:{width:"120px"}},{default:s((()=>[n(N,null,{default:s((()=>[n(S,{style:{transform:"scale(1)"},value:"外住",checked:le.value.check},null,8,["checked"]),u(" 外住 ")])),_:1})])),_:1}),n(U,{modelValue:le.value.value,"onUpdate:modelValue":o[13]||(o[13]=e=>le.value.value=e),clearabled:"",disabled:C.value,style:{width:"70%","margin-left":"15px",height:"5px",border:"1px solid #ccc","border-radius":"5px",padding:"10px"}},null,8,["modelValue","disabled"])])),_:1}),n(d,{style:{display:"flex","justify-content":"flex-start",width:"95%",margin:"0 auto","margin-top":"10px","align-items":"center"}},{default:s((()=>[n(T,{onChange:de,customStyle:{width:"120px"}},{default:s((()=>[n(N,null,{default:s((()=>[n(S,{style:{transform:"scale(1)"},value:"早班",checked:ae.value.check},null,8,["checked"]),u(" 早班 ")])),_:1})])),_:1}),n(U,{modelValue:ae.value.value,"onUpdate:modelValue":o[14]||(o[14]=e=>ae.value.value=e),disabled:I.value,style:{width:"70%","margin-left":"15px",height:"5px",border:"1px solid #ccc","border-radius":"5px",padding:"10px"}},null,8,["modelValue","disabled"])])),_:1}),n(d,{style:{display:"flex","justify-content":"flex-start",width:"95%",margin:"0 auto","margin-top":"10px","align-items":"center"}},{default:s((()=>[n(T,{onChange:ce,customStyle:{width:"120px"}},{default:s((()=>[n(N,null,{default:s((()=>[n(S,{style:{transform:"scale(1)"},value:"夜班",checked:te.value.check},null,8,["checked"]),u(" 夜班 ")])),_:1})])),_:1}),n(U,{modelValue:te.value.value,"onUpdate:modelValue":o[15]||(o[15]=e=>te.value.value=e),disabled:J.value,style:{width:"70%","margin-left":"15px",height:"5px",border:"1px solid #ccc","border-radius":"5px",padding:"10px"}},null,8,["modelValue","disabled"])])),_:1}),n(d,{style:{display:"flex","justify-content":"flex-start",width:"95%",margin:"0 auto","margin-top":"10px","align-items":"center"}},{default:s((()=>[n(T,{onChange:re,customStyle:{width:"120px"}},{default:s((()=>[n(N,null,{default:s((()=>[n(S,{style:{transform:"scale(1)"},value:"解决问题",checked:se.value.check},null,8,["checked"]),u(" 解决问题 ")])),_:1})])),_:1})])),_:1}),n(d,{style:{display:"flex","justify-content":"flex-start",width:"95%",margin:"0 auto","margin-top":"10px","align-items":"center"}},{default:s((()=>[n(T,{onChange:pe,customStyle:{width:"120px"}},{default:s((()=>[n(N,null,{default:s((()=>[n(S,{style:{transform:"scale(1)"},value:"其他",checked:ie.value.check},null,8,["checked"]),u(" 其他 ")])),_:1})])),_:1}),n(U,{modelValue:ie.value.value,"onUpdate:modelValue":o[16]||(o[16]=e=>ie.value.value=e),disabled:Q.value,style:{width:"70%","margin-left":"15px",height:"5px",border:"1px solid #ccc","border-radius":"5px",padding:"10px"}},null,8,["modelValue","disabled"])])),_:1})])),_:1})])),_:1},512),n(X,{ref_key:"popupRef",ref:ze,onSubMit:Ue},null,512),n(K,{ref_key:"popupRefYq",ref:je,onSubMit:Pe},null,512),n(W,{title:"选择组长",ref_key:"popupRefZz",ref:Me,onGetPerson:Ke},null,512),n(Z,{ref_key:"oneCRef",ref:De,searchPlaceholder:"请输入司机",modalText:"当前司机已被安排出班，请确认是否仍然选择",onClickItem:He},null,512),n(Y,{ref_key:"oneCRefGc",ref:$e,onClickItem:Le},null,512),n(Z,{ref_key:"oneCRefCl",ref:Ee,onClickItem:Re},null,512)])),_:1})}}},[["__scopeId","data-v-cb96fb97"]]);export{Q as default};
