import{a as e,D as t,r as l,d as a,e as s,f as o,w as n,i,j as u,F as d,G as c,H as r,l as _,k as p,t as f,m,J as v,K as g,A as y}from"./index-CPBjD6nT.js";import{_ as h}from"./uv-button.DCe9cTzF.js";/* empty css                                                                  */import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-forms.vue_vue_type_style_index_0_scoped_a2a9907e_lang.DTEDUJsm.js";/* empty css                                                                   */import"./uni-popup.vue_vue_type_style_index_0_scoped_f28c6336_lang.COK6mCff.js";import{w as k,a as w,b as j}from"./workloadAuditApi.DCMGF6kR.js";import{s as b}from"./bizScheduApi.BbFgL-ID.js";import"./uv-loading-icon.Bz59kkyK.js";import"./uv-icon.BeAryk0A.js";const C=x({__name:"index",setup(x){e({}),e({current:1,size:10}),t((()=>{D()}));const C=l([]),D=()=>{b({status:"审核中"}).then((e=>{C.value=e.data.records,C.value.map((e=>{e.showDetail=!1}))})).catch((e=>{}))};D();const S=l([]);return console.log("workloadAuditData.value",C.value),l(),(e,t)=>{const l=i,x=a(s("uv-button"),h);return u(),o(l,null,{default:n((()=>[C.value.length>0?(u(),o(l,{key:0,class:"workloadaudit-list"},{default:n((()=>[(u(!0),d(r,null,c(C.value,(e=>(u(),o(l,{class:"workloadaudit-item",key:e.id,onClick:t=>(e=>{e.showDetail=!e.showDetail,e.showDetail&&j({schedulingId:e.id}).then((e=>{console.log("res",e);const t=e.data.split("；").map((e=>{const[t,l]=e.split(":");return{key:t.trim(),value:l.trim()}}));S.value=t}))})(e)},{default:n((()=>[p(l,{class:"workloadaudit-item-title"},{default:n((()=>[_(f(e.name),1)])),_:2},1024),p(l,{class:"base_title"},{default:n((()=>[_("基本信息")])),_:1}),p(l,{class:"flexContent"},{default:n((()=>[p(l,null,{default:n((()=>[_("项目编号："+f(e.projectId),1)])),_:2},1024),p(l,null,{default:n((()=>[_("组长："+f(e.leader),1)])),_:2},1024)])),_:2},1024),p(l,{class:"flexContent"},{default:n((()=>[p(l,null,{default:n((()=>[_("参与人员："+f(e.members),1)])),_:2},1024),p(l,null,{default:n((()=>[_("日期："+f(e.departureDate),1)])),_:2},1024)])),_:2},1024),p(l,{class:"flexContent"},{default:n((()=>[p(l,null,{default:n((()=>[_("司机："+f(e.driver),1)])),_:2},1024),p(l,null,{default:n((()=>[_("车辆："+f(e.vehicle),1)])),_:2},1024)])),_:2},1024),e.showDetail?(u(),o(l,{key:0},{default:n((()=>[p(l,{class:"base_title"},{default:n((()=>[_("具体详情")])),_:1}),p(l,{class:"flexContentSp"},{default:n((()=>[(u(!0),d(r,null,c(S.value,((e,t)=>(u(),o(l,{key:t,style:{flex:"1",padding:"10px"}},{default:n((()=>[_(f(e.key)+"："+f(e.value),1)])),_:2},1024)))),128))])),_:1})])),_:1})):m("",!0),p(l,{class:"btn_list"},{default:n((()=>[p(x,{type:"primary",onClick:t=>(e=>{e.isSp=!0,v({title:"提示",content:"是否进行信息修改",cancelText:"取消修改",confirmText:"确定修改",success:function(t){t.confirm?y({url:"/pages/workload/uploadWork?id="+JSON.stringify(e)}):t.cancel&&console.log("用户点击取消")}})})(e),plain:!0,text:"修改信息",style:{width:"25%"}},null,8,["onClick"]),p(x,{type:"success",onClick:t=>{return l=e.id,console.log(l),void k({schedulingId:l}).then((e=>{v({title:"提示",content:"是否审核通过",cancelText:"取消",confirmText:"确定通过",success:t=>{t.confirm?(w({id:e.data.id,auditStatus:"审核通过"}).then((e=>{console.log(e),D(),g({title:"审核通过",duration:1e3})})),console.log("用户点击确定")):t.cancel&&console.log("用户点击取消")}})}));var l},plain:!0,text:"审核通过",style:{width:"25%"}},null,8,["onClick"]),p(x,{type:"error",onClick:t=>{return l=e.id,void k({schedulingId:l}).then((e=>{console.log(e),v({title:"提示",content:"是否审核拒绝",success:t=>{t.confirm?(w({id:e.data.id,auditStatus:"审核拒绝"}).then((e=>{console.log(e),D(),g({title:"审核拒绝",duration:1e3})})),console.log("用户点击确定")):t.cancel&&console.log("用户点击取消")}})}));var l},plain:!0,text:"审核拒绝",style:{width:"25%"}},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):(u(),o(l,{key:1,style:{width:"100%",height:"200px",display:"flex","justify-content":"center","align-items":"center","font-size":"17px","font-weight":"bold",color:"#999999"}},{default:n((()=>[_(" 当前没有审核 ")])),_:1}))])),_:1})}}},[["__scopeId","data-v-3270185b"]]);export{C as default};
