import{r as e,D as t,d as l,e as a,f as s,w as d,i as n,j as o,k as i,l as u,m as c,F as f,G as r,H as _,aN as y,K as m,t as p,R as x,V as b,W as g,A as h}from"./index-CPBjD6nT.js";import{_ as v}from"./uv-subsection.Cf-jkgRE.js";import{_ as k}from"./uv-button.DCe9cTzF.js";import{_ as w}from"./uv-textarea.BYsIvzb4.js";import{_ as j}from"./uv-modal.Y1UIb7uE.js";import{a as C,b as z,d as I}from"./bizScheduApi.BbFgL-ID.js";import{d as S,w as A,e as T}from"./workloadAuditApi.DCMGF6kR.js";import{_ as U}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uv-loading-icon.Bz59kkyK.js";import"./uv-icon.BeAryk0A.js";import"./uv-line.DVWmxLog.js";import"./uv-popup.RS38a-ll.js";import"./uv-transition.57FirIXI.js";const $=U({__name:"report",setup(U){const $=e(["待办","历史"]),N=e([]),V=e(0),B=e(),D=e("");t((()=>{C().then((e=>{console.log(e),W.value=e.data.records})),z({status:"审核拒绝"}).then((e=>{console.log(e),G.value=e.data.records})),I().then((e=>{console.log(e),H.value=e.data.records}))}));const E=e(["auditStatus","costName","createTime","createUser","deleteFlag","id","schedulingId","updateTime","updateUser","costDesc","tenantId","mySuggestion","myUpdateSuggestion","costTaxi","costToll","costParking","costElse"]);const F=(e,t)=>{b({title:"加载中"}),A({schedulingId:e.id}).then((t=>{T().then((l=>{var a,s,d=E.value.map((function(e){return e.replace(/([A-Z])/g,"_$1").toLowerCase()})),n=function(e,t){return e.filter((function(e){return!t.includes(e.fieldname)}))}(l.data,d),o=function(e){return e.map((function(e){return e.fieldname&&(e.fieldname=e.fieldname.replace(/_([a-z])/g,(function(e,t){return t.toUpperCase()}))),e}))}(n),i=(a=o,s=t.data,console.log("arr2",s),a.reduce((function(e,t){return null!==t.fieldname&&t.fieldname in s&&null!==s[t.fieldname]&&void 0!==s[t.fieldname]&&(e+=`${t.annotation}: ${s[t.fieldname]}，`),e}),""));D.value=`${e.name}:${i}\n 今日工作已完成`,B.value.open(),g()}))})),console.log(e,"item")},J=()=>{y({data:D.value,success:()=>{m({title:"复制成功"}),B.value.close()}})},R=e=>{V.value=e,0==e?(C().then((e=>{console.log(e),W.value=e.data.records})),z({status:"审核拒绝"}).then((e=>{console.log(e),G.value=e.data.records})),I().then((e=>{console.log(e),H.value=e.data.records}))):S().then((e=>{N.value=e.data.records}))},W=e([]),G=e([]),H=e([]),K=(e,t)=>{e.canEdit=t,console.log(e),h({url:"/pages/workload/uploadWork?id="+JSON.stringify(e)})};return(e,t)=>{const y=l(a("uv-subsection"),v),m=n,b=l(a("uv-button"),k),g=l(a("uv-textarea"),w),h=l(a("uv-modal"),j);return o(),s(m,{class:"reportClass"},{default:d((()=>[i(y,{list:$.value,fontSize:"18",current:V.value,onChange:R},null,8,["list","current"]),i(m,{class:"listBox"},{default:d((()=>[W.value.length>0?(o(),s(m,{key:0,class:"table_header"},{default:d((()=>[i(m,{style:{flex:"1"},class:"header_item"},{default:d((()=>[u("组长")])),_:1}),i(m,{style:{flex:"1"},class:"header_item"},{default:d((()=>[u("组员")])),_:1}),i(m,{style:{width:"33%"},class:"header_item"},{default:d((()=>[u("仪器")])),_:1}),i(m,{style:{flex:"1"},class:"header_item"},{default:d((()=>[u("车辆")])),_:1}),i(m,{style:{flex:"1"},class:"header_item"},{default:d((()=>[u("司机")])),_:1})])),_:1})):c("",!0),0==V.value?(o(),s(m,{key:1},{default:d((()=>[i(m,{class:"table_body"},{default:d((()=>[i(m,{style:{"font-size":"30rpx","font-weight":"bold","padding-left":"15px"}},{default:d((()=>[u("今日工程")])),_:1}),0==W.value.length?(o(),s(m,{key:0,style:{width:"100%","border-bottom":"1px solid"}},{default:d((()=>[i(m,{style:{color:"#ccc","font-size":"35rpx","text-align":"center","font-weight":"bold"}},{default:d((()=>[u("今日暂无工程")])),_:1})])),_:1})):c("",!0),W.value.length>0?(o(),s(m,{key:1,style:{width:"100%"}},{default:d((()=>[(o(!0),f(_,null,r(W.value,((t,l)=>(o(),s(m,{class:"body_item",onClick:e=>K(t),key:l},{default:d((()=>[i(m,{class:"body_content"},{default:d((()=>[i(m,{class:"body_content_item"},{default:d((()=>[i(m,null,{default:d((()=>[u(p(t.projectId),1)])),_:2},1024),i(m,{style:{display:"flex","align-items":"center"}},{default:d((()=>[i(m,{class:"item_left"},{default:d((()=>[u(p(t.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),i(m,{class:"body_item_content"},{default:d((()=>[i(m,{style:{flex:"1"},class:"content_item"},{default:d((()=>[u(p(t.leader),1)])),_:2},1024),i(m,{style:{flex:"1",display:"flex","align-items":"center","justify-content":"center"},class:"content_item"},{default:d((()=>["[]"==t.members||null==t.members?(o(),s(m,{key:0})):(o(),s(m,{key:1,style:{display:"flex","flex-direction":"column",padding:"5px 0"}},{default:d((()=>[(o(!0),f(_,null,r(t.members.split(","),((e,t)=>(o(),s(m,{key:t},{default:d((()=>[u(p(e+","),1)])),_:2},1024)))),128))])),_:2},1024))])),_:2},1024),i(m,{style:{width:"33%","border-right":"1px solid","font-size":"14px","font-weight":"bold"}},{default:d((()=>["[]"==t.device||null==t.device?(o(),f("p",{key:0})):(o(),s(m,{key:1,style:{}},{default:d((()=>[(o(!0),f(_,null,r(t.device.split(","),((t,l)=>(o(),f("p",{key:e.sindex,style:{"word-wrap":"break-word"}},p(t+","),1)))),128))])),_:2},1024))])),_:2},1024),i(m,{style:{flex:"1"},class:"content_item"},{default:d((()=>[u(p(t.vehicle),1)])),_:2},1024),i(m,{style:{flex:"1"},class:"content_item"},{default:d((()=>[u(p(t.driver),1)])),_:2},1024)])),_:2},1024),i(m,{class:"body_header"},{default:d((()=>[i(m,null,{default:d((()=>[u(p(t.leader),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):c("",!0)])),_:1}),i(m,{class:"table_body"},{default:d((()=>[i(m,{style:{"font-size":"30rpx","font-weight":"bold","padding-left":"15px"}},{default:d((()=>[u("昨日工程")])),_:1}),H.value.length>0?(o(),s(m,{key:0,style:{width:"100%"}},{default:d((()=>[(o(!0),f(_,null,r(H.value,((t,l)=>(o(),s(m,{class:"body_item",onClick:e=>K(t),key:l},{default:d((()=>[i(m,{class:"body_content"},{default:d((()=>[i(m,{class:"body_content_item"},{default:d((()=>[i(m,null,{default:d((()=>[u(p(t.projectId),1)])),_:2},1024),i(m,{style:{display:"flex","align-items":"center"}},{default:d((()=>[i(m,{class:"item_left"},{default:d((()=>[u(p(t.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),i(m,{class:"body_item_content"},{default:d((()=>[i(m,{style:{flex:"1"},class:"content_item"},{default:d((()=>[u(p(t.leader),1)])),_:2},1024),i(m,{style:{flex:"1",display:"flex","align-items":"center","justify-content":"center"},class:"content_item"},{default:d((()=>["[]"==t.members||null==t.members?(o(),s(m,{key:0})):(o(),s(m,{key:1,style:{display:"flex","flex-direction":"column",padding:"5px 0"}},{default:d((()=>[(o(!0),f(_,null,r(t.members.split(","),((e,t)=>(o(),s(m,{key:t},{default:d((()=>[u(p(e+","),1)])),_:2},1024)))),128))])),_:2},1024))])),_:2},1024),i(m,{style:{width:"23%","border-right":"1px solid","font-size":"14px","font-weight":"bold"}},{default:d((()=>["[]"==t.device||null==t.device?(o(),f("p",{key:0})):(o(),s(m,{key:1,style:{}},{default:d((()=>[(o(!0),f(_,null,r(t.device.split(","),((t,l)=>(o(),f("p",{style:{"word-wrap":"break-word"},key:e.sindex},p(t+","),1)))),128))])),_:2},1024))])),_:2},1024),i(m,{style:{flex:"1"},class:"content_item"},{default:d((()=>[u(p(t.vehicle),1)])),_:2},1024),i(m,{style:{flex:"1"},class:"content_item"},{default:d((()=>[u(p(t.driver),1)])),_:2},1024)])),_:2},1024),i(m,{class:"body_header"},{default:d((()=>[i(m,null,{default:d((()=>[u(p(t.leader),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):c("",!0),0==H.value.length?(o(),s(m,{key:1,style:{width:"100%","border-bottom":"1px solid"}},{default:d((()=>[i(m,{style:{color:"#ccc","font-size":"35rpx","text-align":"center","font-weight":"bold"}},{default:d((()=>[u("昨日暂无工程")])),_:1})])),_:1})):c("",!0)])),_:1}),i(m,{class:"table_body"},{default:d((()=>[i(m,{style:{"font-size":"30rpx","font-weight":"bold","padding-left":"15px"}},{default:d((()=>[u("修改工程")])),_:1}),G.value.length>0?(o(),s(m,{key:0,style:{width:"100%"}},{default:d((()=>[(o(!0),f(_,null,r(G.value,((t,l)=>(o(),s(m,{class:"body_item",onClick:e=>K(t),key:l},{default:d((()=>[i(m,{class:"body_content"},{default:d((()=>[i(m,{class:"body_content_item"},{default:d((()=>[i(m,null,{default:d((()=>[u(p(t.projectId),1)])),_:2},1024),i(m,{style:{display:"flex","align-items":"center"}},{default:d((()=>[i(m,{class:"item_left"},{default:d((()=>[u(p(t.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),i(m,{class:"body_item_content"},{default:d((()=>[i(m,{style:{flex:"1"},class:"content_item"},{default:d((()=>[u(p(t.leader),1)])),_:2},1024),i(m,{style:{flex:"1",display:"flex","align-items":"center","justify-content":"center"},class:"content_item"},{default:d((()=>["[]"==t.members||null==t.members?(o(),s(m,{key:0})):(o(),s(m,{key:1,style:{display:"flex","flex-direction":"column",padding:"5px 0"}},{default:d((()=>[(o(!0),f(_,null,r(t.members.split(","),((e,t)=>(o(),s(m,{key:t},{default:d((()=>[u(p(e+","),1)])),_:2},1024)))),128))])),_:2},1024))])),_:2},1024),i(m,{style:{width:"23%","border-right":"1px solid","font-size":"14px","font-weight":"bold"}},{default:d((()=>["[]"==t.device||null==t.device?(o(),f("p",{key:0})):(o(),s(m,{key:1,style:{}},{default:d((()=>[(o(!0),f(_,null,r(t.device.split(","),((t,l)=>(o(),f("p",{key:e.sindex,style:{"word-wrap":"break-word"}},p(t+","),1)))),128))])),_:2},1024))])),_:2},1024),i(m,{style:{flex:"1"},class:"content_item"},{default:d((()=>[u(p(t.vehicle),1)])),_:2},1024),i(m,{style:{flex:"1"},class:"content_item"},{default:d((()=>[u(p(t.driver),1)])),_:2},1024)])),_:2},1024),i(m,{class:"body_header"},{default:d((()=>[i(m,null,{default:d((()=>[u(p(t.leader),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):c("",!0),0==G.value.length?(o(),s(m,{key:1,style:{width:"100%","border-bottom":"1px solid"}},{default:d((()=>[i(m,{style:{color:"#ccc","font-size":"35rpx","text-align":"center","font-weight":"bold"}},{default:d((()=>[u("暂无修改工程")])),_:1})])),_:1})):c("",!0)])),_:1})])),_:1})):(o(),s(m,{key:2},{default:d((()=>[i(m,{class:"table_body"},{default:d((()=>[i(m,{style:{"font-size":"30rpx","font-weight":"bold","padding-left":"15px"}},{default:d((()=>[u("历史工程")])),_:1}),0==N.value.length?(o(),s(m,{key:0,style:{width:"100%","border-bottom":"1px solid"}},{default:d((()=>[i(m,{style:{color:"#ccc","font-size":"35rpx","text-align":"center","font-weight":"bold"}},{default:d((()=>[u("暂无历史工程")])),_:1})])),_:1})):c("",!0),N.value.length>0?(o(),s(m,{key:1,style:{width:"100%"}},{default:d((()=>[(o(!0),f(_,null,r(N.value,((l,a)=>(o(),s(m,{class:"body_item",onClick:e=>K(l,"历史"),key:a},{default:d((()=>[i(m,{class:"body_content"},{default:d((()=>[i(m,{class:"body_content_item"},{default:d((()=>[i(m,null,{default:d((()=>[u(p(l.projectId),1)])),_:2},1024),i(m,{style:{display:"flex","align-items":"center"}},{default:d((()=>[i(m,{class:"item_left"},{default:d((()=>[u(p(l.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),i(m,{class:"body_item_content"},{default:d((()=>[i(m,{style:{flex:"1"},class:"content_item"},{default:d((()=>[u(p(l.leader),1)])),_:2},1024),i(m,{style:{flex:"1",display:"flex","align-items":"center","justify-content":"center"},class:"content_item"},{default:d((()=>["[]"==l.members||null==l.members?(o(),s(m,{key:0})):(o(),s(m,{key:1,style:{display:"flex","flex-direction":"column",padding:"5px 0"}},{default:d((()=>[(o(!0),f(_,null,r(l.members.split(","),((e,t)=>(o(),s(m,{key:t},{default:d((()=>[u(p(e+","),1)])),_:2},1024)))),128))])),_:2},1024))])),_:2},1024),i(m,{style:{width:"33%","border-right":"1px solid","font-size":"14px","font-weight":"bold"}},{default:d((()=>["[]"==l.device||null==l.device?(o(),f("p",{key:0})):(o(),s(m,{key:1,style:{}},{default:d((()=>[(o(!0),f(_,null,r(l.device.split(","),((t,l)=>(o(),f("p",{style:{"word-wrap":"break-word"},key:e.sindex},p(t+","),1)))),128))])),_:2},1024))])),_:2},1024),i(m,{style:{flex:"1"},class:"content_item"},{default:d((()=>[u(p(l.vehicle),1)])),_:2},1024),i(m,{style:{flex:"1"},class:"content_item"},{default:d((()=>[u(p(l.driver),1)])),_:2},1024)])),_:2},1024),i(m,{class:"body_header",onClick:t[0]||(t[0]=x((()=>{}),["stop","prevent"]))},{default:d((()=>[i(m,null,{default:d((()=>[u(p(l.leader),1)])),_:2},1024),i(b,{type:"primary",onClick:e=>F(l),style:{height:"100%"},"auto-height":"true"},{default:d((()=>[u("生成排班总结")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):c("",!0)])),_:1})])),_:1}))])),_:1}),i(h,{ref_key:"modalRef",ref:B,title:"排班"},{default:d((()=>[i(g,{modelValue:D.value,"onUpdate:modelValue":t[1]||(t[1]=e=>D.value=e)},null,8,["modelValue"])])),confirmButton:d((()=>[i(b,{type:"primary",onClick:J},{default:d((()=>[u("复制")])),_:1})])),_:1},512)])),_:1})}}},[["__scopeId","data-v-07cba36d"]]);export{$ as default};
