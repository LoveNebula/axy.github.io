import{r as e,a8 as a,j as l,f as t,w as s,k as o,m as n,v as u,l as r,a$ as i,b0 as c,I as d,i as f,q as m,d as p,e as _,E as v,s as y,A as g,c as h,F as k,G as b,H as x,b1 as w,au as C,t as E}from"./index-CPBjD6nT.js";import{_ as S}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as j}from"./uv-icon.BeAryk0A.js";import{_ as V,a as $}from"./uv-row.Br5R1eP3.js";import{_ as A}from"./tui-button.up_-5W2f.js";import{_ as I,a as T}from"./tui-list-view.B5zwHwid.js";import{_ as z}from"./uv-popup.RS38a-ll.js";/* empty css                                                                   *//* empty css                                                                      */import"./uv-transition.57FirIXI.js";const U=S({__name:"snowy-search",props:{modelValue:[String,Array]},emits:["update:modelValue","confirm","clear","seniorSearch"],setup(p,{emit:_}){const v=_,y=p,g=e("");a((()=>y.modelValue),((e,a)=>{g.value=e}),{deep:!1,immediate:!0});const h=e(!1),k=e=>{g.value=e.detail.value,h.value=!0,v("update:modelValue",g.value)},b=()=>{g.value="",h.value=!1,i(),v("update:modelValue",g.value),v("clear")},x=()=>{v("update:modelValue",g.value),v("confirm",g.value)},w=()=>{v("seniorSearch")};return(e,a)=>{const i=c,p=d,_=f,v=m;return l(),t(_,{class:"search-bar"},{default:s((()=>[o(_,{class:"search-bar-form"},{default:s((()=>[o(_,{class:"search-bar-box"},{default:s((()=>[o(i,{type:"search",size:16}),o(p,{class:"search-bar-input","confirm-type":"search",placeholder:e.$attrs.placeholder?e.$attrs.placeholder:"请输入搜索关键词","placeholder-class":"phcolor",value:g.value,onInput:k,onConfirm:x},null,8,["placeholder","value"]),h.value?(l(),t(i,{key:0,type:"clear",size:15,onClick:b})):n("",!0)])),_:1})])),_:1}),e.$attrs.enableSenior?(l(),t(_,{key:0,class:"senior",onClick:w},{default:s((()=>[u(e.$slots,"default",{},(()=>[o(v,{style:{color:"#5677fc","font-weight":"bold","text-shadow":"2px 2px 4px #ccc"}},{default:s((()=>[r("高级\\n搜索")])),_:1})]),!0)])),_:3})):n("",!0)])),_:3})}}},[["__scopeId","data-v-7759be61"]]),F=S({__name:"snowy-float-btn",props:{buttonText:{type:String,required:!1,default:"+"}},emits:["click"],setup(e,{emit:a}){const n=a,r=()=>{n("click")};return(e,a)=>{const n=p(_("uv-icon"),j),i=f;return l(),t(i,{class:"floating-button",onClick:r},{default:s((()=>[u(e.$slots,"default",{},(()=>[o(n,{name:"plus",color:"#ffffff",size:"20"})]),!0)])),_:3})}}},[["__scopeId","data-v-e12d3431"]]),K=S({__name:"more",emits:["handleOk"],setup(a,{expose:u,emit:i}){const c=e(),d=e({}),m=()=>{g({url:"/pages/config/form?record="+encodeURIComponent(JSON.stringify(d.value))}),c.value.close()},h=()=>{uni.$snowy.modal.confirm(`是否确认删除【${d.value.name}】环境？`).then((()=>{let e=uni.$xeu.clone(y.getters.allEnv,!0);delete e[d.value.key],y.commit("SET_allEnv",e),c.value.close()}))},k=()=>{c.value.close()};return u({open:e=>{d.value=e,c.value.open()}}),(e,a)=>{const u=f,i=p(_("tui-list-cell"),I),g=p(_("tui-list-view"),T),b=p(_("uv-popup"),z);return l(),t(b,{ref_key:"popRef",ref:c,mode:"bottom","bg-color":"null","z-index":"99"},{default:s((()=>[o(u,{class:"container"},{default:s((()=>[o(g,{unlined:"all","background-color":"transparent"},{default:s((()=>[o(i,{hover:!0,arrow:!1,onClick:m,radius:10},{default:s((()=>[o(u,{class:"item"},{default:s((()=>[r(" 编辑 ")])),_:1})])),_:1}),v(y).getters.envKey!=d.value.key?(l(),t(i,{key:0,hover:!0,arrow:!1,onClick:h,radius:10,"margin-top":2},{default:s((()=>[o(u,{class:"item"},{default:s((()=>[r(" 刪除 ")])),_:1})])),_:1})):n("",!0),o(i,{hover:!0,arrow:!1,onClick:k,"margin-top":10,radius:10},{default:s((()=>[o(u,{class:"item"},{default:s((()=>[r(" 取消 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},512)}}},[["__scopeId","data-v-7dcef1de"]]),L=S({__name:"index",setup(a){const n=e(""),u=h((()=>y.getters.envKey)),i=h((()=>y.getters.allEnv)),c=e=>{const a={};return uni.$xeu.objectEach(e,((e,l)=>{n.value&&-1==e.name.indexOf(n.value)||(a[l]=e)})),a},d=()=>{y.commit("SET_envKey",w.DEFAULT_ENV_KEY),y.commit("SET_allEnv",w.DEFAULT_ALL_ENV)},v=()=>{C({url:"/pages/login"})},S=()=>{g({url:"/pages/config/form"})};return(e,a)=>{const g=m,h=f,w=p(_("snowy-search"),U),C=p(_("uv-icon"),j),I=p(_("uv-col"),V),T=p(_("uv-row"),$),z=p(_("tui-button"),A),L=p(_("snowy-float-btn"),F);return l(),t(h,null,{default:s((()=>[o(w,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=e=>n.value=e),enableSenior:!0},{default:s((()=>[o(h,{onClick:d},{default:s((()=>[o(g,null,{default:s((()=>[r(" 重置\\n环境 ")])),_:1})])),_:1})])),_:1},8,["modelValue"]),(l(!0),k(x,null,b(c(i.value),((a,n)=>(l(),t(h,{class:"item",key:n,index:n},{default:s((()=>[o(h,{onClick:e=>(e=>{y.commit("SET_envKey",e)})(n),class:"item"},{default:s((()=>[o(T,null,{default:s((()=>[o(I,{span:"6"},{default:s((()=>[n===u.value?(l(),t(C,{key:0,size:"20",name:"integral-fill",color:"#007AFF"})):(l(),t(C,{key:1,size:"20",name:"integral"}))])),_:2},1024),o(I,{span:"6",textAlign:"right"},{default:s((()=>[o(h,{class:"item-right snowy-bold snowy-ellipsis"},{default:s((()=>[r(E(a.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"]),o(h,{onClick:l=>e.$refs.moreRef.open({key:n,...a}),class:"item"},{default:s((()=>[o(T,{customStyle:"margin-top: 15rpx"},{default:s((()=>[o(I,{span:"6"},{default:s((()=>[o(h,{class:"item-left"},{default:s((()=>[r("key：")])),_:1})])),_:1}),o(I,{span:"6",textAlign:"right"},{default:s((()=>[o(h,{class:"item-right snowy-bold snowy-ellipsis"},{default:s((()=>[r(E(n),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),o(T,{customStyle:"margin-top: 15rpx"},{default:s((()=>[o(I,{span:"6"},{default:s((()=>[o(h,{class:"item-left"},{default:s((()=>[r("baseUrl：")])),_:1})])),_:1}),o(I,{span:"6",textAlign:"right"},{default:s((()=>[o(h,{class:"item-right snowy-bold snowy-ellipsis"},{default:s((()=>[r(E(a.baseUrl),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),o(T,{customStyle:"margin-top: 15rpx"},{default:s((()=>[o(I,{span:"6"},{default:s((()=>[o(h,{class:"item-left"},{default:s((()=>[r("tenant：")])),_:1})])),_:1}),o(I,{span:"6",textAlign:"right"},{default:s((()=>[o(h,{class:"item-right snowy-bold snowy-ellipsis"},{default:s((()=>[r(E(a.tenantDomain),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1032,["index"])))),128)),o(z,{margin:"50rpx 0",preventClick:!0,shadow:!0,onClick:v},{default:s((()=>[r("确认")])),_:1}),o(L,{onClick:S}),o(K,{ref:"moreRef"},null,512)])),_:1})}}},[["__scopeId","data-v-81ef1cca"]]);export{L as default};
