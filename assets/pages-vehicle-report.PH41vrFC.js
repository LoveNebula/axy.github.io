import{r as e,o as l,d as a,e as o,f as t,w as r,i as u,j as d,k as s,l as i,t as n,m as p,F as m,G as c,E as g,H as f,K as v,A as b,I as h}from"./index-CPBjD6nT.js";import{_ as V}from"./uv-input.D6qbiBl7.js";import{_,a as y}from"./uv-form.D7lRPiGH.js";import{_ as U,a as x}from"./uv-radio-group.CmIOQjZB.js";import{_ as B}from"./uv-button.DCe9cTzF.js";import{g as j}from"./gcVehicleRecordManage.B03dmY0w.js";import{s as k}from"./snowy-file-picker-api.DRNXbXpN.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uv-icon.BeAryk0A.js";import"./uv-transition.57FirIXI.js";import"./uv-line.DVWmxLog.js";import"./uv-loading-icon.Bz59kkyK.js";const M=C({__name:"report",setup(C){e([]);const M=e(),W=e(!1),w=e({}),q=e({stopPlace:{type:"string",required:!0,message:"请输入还车地点",trigger:["blur","change"]},stopMileage:{type:"string",required:!0,message:"请输入还车时里程(km)",trigger:["blur","change"]},matter:{type:"string",required:!0,message:"请选择事由",trigger:["blur","change"]},refuelingCost:{type:"string",required:!0,message:"请输入",trigger:["blur","change"]},stopUrl:{type:"string",required:!0,message:"请上传用车里程照片",trigger:["blur","change"]}});e(!1),e(!1);const P=uni.$snowy.tool.dictList("GC_MATTER");l((e=>{w.value.id=JSON.parse(e.id),R()}));const R=()=>{j.gcVehicleRecordDetail({id:w.value.id}).then((e=>{w.value=e}))},E=()=>{M.value.resetFields()},I=()=>{console.log(w.value),M.value.validate().then((e=>{e?j.gcVehicleRecordEdit(w.value).then((e=>{v({title:"还车成功",duration:1e3,icon:"none"}),b({url:"/pages/vehicle/index"})})):v({title:"请检查填写内容！",duration:1e3,icon:"none"})})).catch((()=>{v({title:"请检查填写内容！",duration:1e3,icon:"none"})}))};return(e,l)=>{const v=a(o("uv-input"),V),b=a(o("uv-form-item"),_),j=u,C=a(o("uv-radio"),U),R=a(o("uv-radio-group"),x),T=h,A=a(o("uv-form"),y),F=a(o("uv-button"),B);return d(),t(j,{class:"box",style:{background:"#fff"}},{default:r((()=>[s(A,{labelPosition:"left",model:w.value,rules:q.value,ref_key:"formRef",ref:M},{default:r((()=>[s(b,{label:"* 还车地点",labelWidth:"145",prop:"stopPlace",borderBottom:""},{default:r((()=>[s(v,{modelValue:w.value.stopPlace,"onUpdate:modelValue":l[0]||(l[0]=e=>w.value.stopPlace=e),placeholder:"请输入还车地点",border:"none"},null,8,["modelValue"])])),_:1}),s(b,{label:"* 还车时里程",labelWidth:"145",prop:"stopMileage",borderBottom:""},{default:r((()=>[s(v,{type:"number",modelValue:w.value.stopMileage,"onUpdate:modelValue":l[1]||(l[1]=e=>w.value.stopMileage=e),placeholder:"请输入还车时里程(km)",border:"none",onBlur:l[2]||(l[2]=e=>W.value=!0)},null,8,["modelValue"])])),_:1}),s(b,{label:"本次行车",labelWidth:"145",prop:"stop",borderBottom:""},{default:r((()=>[i(" 本次行车 "),w.value.stopMileage-w.value.startMileage>0?(d(),t(j,{key:0,style:{"font-size":"20px",margin:"0 10px",color:"#3c9cff"}},{default:r((()=>[i(n(w.value.stopMileage-w.value.startMileage),1)])),_:1})):p("",!0),i(" Km ")])),_:1}),s(b,{label:"* 还车里程照片",labelWidth:"145",prop:"stopUrl",borderBottom:""},{default:r((()=>[s(k,{modelValue:w.value.stopUrl,"onUpdate:modelValue":l[3]||(l[3]=e=>w.value.stopUrl=e),limit:1},null,8,["modelValue"])])),_:1}),s(b,{label:"* 事由",labelWidth:"145",prop:"matter",borderBottom:""},{default:r((()=>[s(R,{modelValue:w.value.matter,"onUpdate:modelValue":l[4]||(l[4]=e=>w.value.matter=e)},{default:r((()=>[(d(!0),m(f,null,c(g(P),((e,l)=>(d(),t(C,{customStyle:{margin:"8px"},key:l,label:e.text,name:e.text},null,8,["label","name"])))),128))])),_:1},8,["modelValue"])])),_:1}),s(b,{label:"* 加油费用",labelWidth:"145",prop:"refuelingCost",borderBottom:""},{default:r((()=>[s(T,{type:"digit",modelValue:w.value.refuelingCost,"onUpdate:modelValue":l[5]||(l[5]=e=>w.value.refuelingCost=e),placeholder:"请输入加油费用"},null,8,["modelValue"])])),_:1}),s(b,{label:"加油费用发票照片",labelWidth:"145",prop:"refuelingCostUrl",borderBottom:""},{default:r((()=>[s(k,{modelValue:w.value.refuelingCostUrl,"onUpdate:modelValue":l[6]||(l[6]=e=>w.value.refuelingCostUrl=e),limit:1},null,8,["modelValue"])])),_:1}),s(b,{label:"其他费用明细",labelWidth:"145",prop:"costBreakdown",borderBottom:""},{default:r((()=>[s(v,{modelValue:w.value.costBreakdown,"onUpdate:modelValue":l[7]||(l[7]=e=>w.value.costBreakdown=e),placeholder:"请输入其他费用明细",border:"none"},null,8,["modelValue"])])),_:1}),s(b,{label:"费用",labelWidth:"145",prop:"cost",borderBottom:""},{default:r((()=>[s(v,{type:"number",modelValue:w.value.cost,"onUpdate:modelValue":l[8]||(l[8]=e=>w.value.cost=e),placeholder:"请输入费用(元)",border:"none"},null,8,["modelValue"])])),_:1}),s(b,{label:"费用发票照片",labelWidth:"145",prop:"costUrl",borderBottom:""},{default:r((()=>[s(k,{modelValue:w.value.costUrl,"onUpdate:modelValue":l[9]||(l[9]=e=>w.value.costUrl=e),limit:1},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"]),s(j,{style:{display:"flex"}},{default:r((()=>[s(F,{type:"error",text:"重置",onClick:E,style:{margin:"10rpx",width:"45%"}}),s(F,{type:"primary",text:"确定",style:{margin:"10rpx",width:"45%"},onClick:I})])),_:1})])),_:1})}}},[["__scopeId","data-v-f400d5f5"]]);export{M as default};
