var t,e;import{av as i,j as a,f as s,w as l,F as r,H as u,G as o,x as d,R as n,k as c,y as h,l as p,t as g,m as f,i as b,ac as m,ad as y,q as v,v as x,p as S,d as _,e as w,aX as C,r as k,a as $,D as N,aY as T,aZ as B,af as W,aE as F,aF as z,A as D}from"./index-CPBjD6nT.js";import{_ as E}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as I,a as U}from"./uv-row.Br5R1eP3.js";const H=E({name:"tuiTabs",emits:["change"],props:{tabs:{type:Array,default:()=>[]},width:{type:Number,default:0},height:{type:Number,default:80},padding:{type:Number,default:30},backgroundColor:{type:String,default:"#FFFFFF"},isFixed:{type:Boolean,default:!1},top:{type:Number,default:44},unlined:{type:Boolean,default:!1},currentTab:{type:Number,default:0},isSlider:{type:Boolean,default:!0},sliderWidth:{type:Number,default:68},sliderHeight:{type:Number,default:6},sliderBgColor:{type:String,default:""},sliderRadius:{type:String,default:"50rpx"},bottom:{type:String,default:"0"},itemWidth:{type:String,default:""},color:{type:String,default:"#666"},selectedColor:{type:String,default:""},size:{type:Number,default:28},bold:{type:Boolean,default:!1},scale:{type:[Number,String],default:1},badgeColor:{type:String,default:"#fff"},badgeBgColor:{type:String,default:""},zIndex:{type:[Number,String],default:996}},watch:{currentTab(){this.checkCor()},tabs(){this.checkCor()},width(t){this.tabsWidth=t,this.checkCor()}},computed:{getItemWidth(){let t=100/(this.tabs.length||4)+"%";return this.itemWidth?this.itemWidth:t},getSliderBgColor(){return this.sliderBgColor||uni&&uni.$tui&&uni.$tui.color.primary||"#5677fc"},getSelectedColor(){return this.selectedColor||uni&&uni.$tui&&uni.$tui.color.primary||"#5677fc"},getBadgeBgColor(){return this.badgeBgColor||uni&&uni.$tui&&uni.$tui.color.pink||"#f74d54"}},created(){setTimeout((()=>{i({success:t=>{this.winWidth=t.windowWidth,this.tabsWidth=0==this.width?this.winWidth:this.width,this.checkCor()}})}),0)},data:()=>({winWidth:0,tabsWidth:0,scrollLeft:0}),methods:{checkCor:function(){let t=this.tabs.length,e=this.winWidth/750*this.padding,i=this.tabsWidth-2*e,a=(i/t-this.winWidth/750*this.sliderWidth)/2+e;this.currentTab>0&&(a+=i/t*this.currentTab),this.scrollLeft=a},swichTabs:function(t){let e=this.tabs[t];if(!e||!e.disabled)return this.currentTab!=t&&void this.$emit("change",{index:Number(t)})}}},[["render",function(t,e,i,m,y,v){const x=b;return y.tabsWidth>0?(a(),s(x,{key:0,class:h(["tui-tabs-view",[i.isFixed?"tui-tabs-fixed":"tui-tabs-relative",i.unlined?"tui-unlined":""]]),style:d({width:y.tabsWidth+"px",height:i.height+"rpx",padding:`0 ${i.padding}rpx`,background:i.backgroundColor,top:i.isFixed?i.top+"px":"auto",zIndex:i.isFixed?i.zIndex:"auto"})},{default:l((()=>[(a(!0),r(u,null,o(i.tabs,((t,e)=>(a(),s(x,{key:e,class:"tui-tabs-item",style:d({width:v.getItemWidth,height:i.height+"rpx"}),onClick:n((t=>v.swichTabs(e)),["stop"])},{default:l((()=>[c(x,{class:h(["tui-tabs-title",{"tui-tabs-disabled":t.disabled}]),style:d({color:i.currentTab==e?v.getSelectedColor:i.color,fontSize:i.size+"rpx",fontWeight:i.bold&&i.currentTab==e?"bold":"normal",transform:`scale(${i.currentTab==e?i.scale:1})`})},{default:l((()=>[p(g(t.name)+" ",1),t.num||t.isDot?(a(),s(x,{key:0,class:h([t.isDot?"tui-badge__dot":"tui-tabs__badge"]),style:d({color:i.badgeColor,backgroundColor:v.getBadgeBgColor})},{default:l((()=>[p(g(t.isDot?"":t.num),1)])),_:2},1032,["class","style"])):f("",!0)])),_:2},1032,["class","style"])])),_:2},1032,["style","onClick"])))),128)),i.isSlider?(a(),s(x,{key:0,class:"tui-tabs-slider",style:d({transform:"translateX("+y.scrollLeft+"px)",width:i.sliderWidth+"rpx",height:i.sliderHeight+"rpx",borderRadius:i.sliderRadius,bottom:i.bottom,background:v.getSliderBgColor,marginBottom:"50%"==i.bottom?"-"+i.sliderHeight/2+"rpx":0})},null,8,["style"])):f("",!0)])),_:1},8,["class","style"])):f("",!0)}],["__scopeId","data-v-1c4cfba3"]]);const j=E({name:"uv-badge",mixins:[m,y,{props:{isDot:{type:Boolean,default:!1},value:{type:[Number,String],default:""},show:{type:Boolean,default:!0},max:{type:[Number,String],default:999},type:{type:[String,void 0,null],default:"error"},showZero:{type:Boolean,default:!1},bgColor:{type:[String,null],default:null},color:{type:[String,null],default:null},shape:{type:[String,void 0,null],default:"circle"},numberType:{type:[String,void 0,null],default:"overflow"},offset:{type:Array,default:()=>[]},inverted:{type:Boolean,default:!1},absolute:{type:Boolean,default:!1},...null==(e=null==(t=uni.$uv)?void 0:t.props)?void 0:e.badge}}],computed:{boxStyle:()=>({}),badgeStyle(){const t={};if(this.color&&(t.color=this.color),this.bgColor&&!this.inverted&&(t.backgroundColor=this.bgColor),this.absolute&&(t.position="absolute",this.offset.length)){const e=this.offset[0],i=this.offset[1]||e;t.top=this.$uv.addUnit(e),t.right=this.$uv.addUnit(i)}return t},showValue(){switch(this.numberType){case"overflow":return Number(this.value)>Number(this.max)?this.max+"+":this.value;case"ellipsis":return Number(this.value)>Number(this.max)?"...":this.value;case"limit":return Number(this.value)>999?Number(this.value)>=9999?Math.floor(this.value/1e4*100)/100+"w":Math.floor(this.value/1e3*100)/100+"k":this.value;default:return Number(this.value)}},propsType(){return this.type||"error"}}},[["render",function(t,e,i,r,u,o){const n=v;return t.show&&(0!==Number(t.value)||t.showZero||t.isDot)?(a(),s(n,{key:0,class:h([[t.isDot?"uv-badge--dot":"uv-badge--not-dot",t.inverted&&"uv-badge--inverted","horn"===t.shape&&"uv-badge--horn",`uv-badge--${o.propsType}${t.inverted?"--inverted":""}`],"uv-badge"]),style:d([t.$uv.addStyle(t.customStyle),o.badgeStyle])},{default:l((()=>[p(g(t.isDot?"":o.showValue),1)])),_:1},8,["class","style"])):f("",!0)}],["__scopeId","data-v-8c3e535e"]]);const R=E({name:"tuiNoData",emits:["click"],props:{fixed:{type:Boolean,default:!0},imgUrl:{type:String,default:""},imgWidth:{type:[Number,String],default:200},imgHeight:{type:[Number,String],default:200},imgBottom:{type:[Number,String],default:30},btnWidth:{type:[Number,String],default:200},btnHeight:{type:[Number,String],default:60},btnText:{type:String,default:""},backgroundColor:{type:String,default:""},size:{type:[Number,String],default:28},radius:{type:String,default:"8rpx"},marginTop:{type:[Number,String],default:0}},computed:{getBgColor(){return this.backgroundColor||uni&&uni.$tui&&uni.$tui.color.danger||"#EB0909"}},methods:{handleClick(t){this.$emit("click",{})}}},[["render",function(t,e,i,r,u,o){const n=S,m=b;return a(),s(m,{class:h(["tui-nodata-box",[i.fixed?"tui-nodata-fixed":""]]),style:d({marginTop:i.marginTop+"rpx"})},{default:l((()=>[i.imgUrl?(a(),s(n,{key:0,src:i.imgUrl,class:"tui-tips-icon",style:d({width:i.imgWidth+"rpx",height:i.imgHeight+"rpx",marginBottom:i.imgBottom+"rpx"}),mode:"widthFix"},null,8,["src","style"])):f("",!0),c(m,{class:"tui-tips-content"},{default:l((()=>[x(t.$slots,"default",{},void 0,!0)])),_:3}),i.btnText?(a(),s(m,{key:1,class:"tui-tips-btn",style:d({width:i.btnWidth+"rpx",height:i.btnHeight+"rpx",background:o.getBgColor,borderRadius:i.radius,fontSize:i.size+"rpx"}),onClick:o.handleClick},{default:l((()=>[p(g(i.btnText),1)])),_:1},8,["style","onClick"])):f("",!0)])),_:3},8,["class","style"])}],["__scopeId","data-v-842de521"]]);const A=E({},[["render",function(t,e){const i=_(w("tui-no-data"),R);return a(),s(i,C(t.$attrs,{fixed:!!t.$attrs.fixed&&t.$attrs.fixed,imgUrl:t.$attrs.imgUrl?t.$attrs.imgUrl:"/static/svg/empty/nodata.svg"}),{default:l((()=>[x(t.$slots,"default",{},(()=>[p("暂无数据")]))])),_:3},16,["fixed","imgUrl"])}]]),L=E({__name:"index",setup(t){const e=k(0),i=k([]),d=uni.$snowy.tool.dictList("MESSAGE_CATEGORY");uni.$xeu.isEmpty(d)||d.forEach((t=>{i.value.push({name:t.text})}));const n=$({}),f=$({current:1,size:10}),m=k([]),y=t=>{var i;t&&(f.current=1,m.value=[]),n.category=uni.$xeu.isEmpty(d)?"":null==(i=d[e.value])?void 0:i.value,Object.assign(f,n),B(f).then((t=>{var e;uni.$xeu.isEmpty(null==(e=null==t?void 0:t.data)?void 0:e.records)||(m.value=m.value.concat(t.data.records),f.current++)})).finally((()=>{W()}))};N((()=>{y(!0)})),T((()=>{y()}));return(t,d)=>{const n=_(w("tui-tabs"),H),f=b,v=_(w("uv-col"),I),x=_(w("uv-badge"),j),S=_(w("uv-row"),U),C=_(w("snowy-empty"),A);return a(),s(f,null,{default:l((()=>[c(n,{top:0,isFixed:!0,tabs:i.value,currentTab:e.value,onChange:d[0]||(d[0]=t=>{e.value!=t.index&&(e.value=t.index,y(!0))})},null,8,["tabs","currentTab"]),c(f,{class:"msg-list"},{default:l((()=>[(a(!0),r(u,null,o(m.value,((t,e)=>(a(),s(f,{class:"item",key:e,index:e,onClick:e=>(t=>{D({url:`/pages/msg/detail?id=${t.id}&createTime=${t.createTime}`})})(t)},{default:l((()=>[c(S,null,{default:l((()=>[c(v,{span:"11"},{default:l((()=>[c(f,{class:h(["item-title snowy-bold snowy-ellipsis",t.read?"item-grey":""])},{default:l((()=>[p(g(t.subject),1)])),_:2},1032,["class"])])),_:2},1024),c(v,{span:"1"},{default:l((()=>[F(c(f,{class:"snowy-flex-end"},{default:l((()=>[c(x,{isDot:!0,type:"error"})])),_:2},1536),[[z,!t.read]])])),_:2},1024)])),_:2},1024),c(S,{customStyle:"margin-top: 15rpx"},{default:l((()=>[c(v,{span:"12"},{default:l((()=>[c(f,{class:"item-sub-title snowy-ellipsis"},{default:l((()=>[p(g(t.createTime),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),c(S,{customStyle:"margin-top: 15rpx"},{default:l((()=>[c(v,{span:"12"},{default:l((()=>[c(f,{class:"item-sub-title snowy-ellipsis"},{default:l((()=>[p(g(t.content),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["index","onClick"])))),128))])),_:1}),F(c(C,{fixed:!0},null,512),[[z,t.$xeu.isEmpty(m.value)]])])),_:1})}}},[["__scopeId","data-v-495e5498"]]);export{L as default};
